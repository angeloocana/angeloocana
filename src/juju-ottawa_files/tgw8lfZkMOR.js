if (self.CavalryLogger) { CavalryLogger.start_js(["vcpiX"]); }

__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports={FLOWERS:"flowers"};}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports={BORDER:"border"};}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};}),null);
__d("MessengerParticipantAddModeTypes",[],(function a(b,c,d,e,f,g){f.exports={ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"};}),null);
__d("MessengerRoomPrivacyMode",[],(function a(b,c,d,e,f,g){f.exports={WHITELISTED_MODE:0,PUBLIC_MODE:1};}),null);
__d("MNBotsLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"};}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",MEDIA:"media"};}),null);
__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"};}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,CONCEPT:1,INTENT:2};}),null);
__d("TimeSpentRoomTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={GROUP:"GROUP",EVENT:"EVENT"};}),null);
__d('TypingDetector',['ArbiterMixin','Event','Input','Run','SubscriptionsHandler','TypingStates','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g){function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j;}Object.assign(h.prototype,c('ArbiterMixin'),{_timeout:7000,_currentState:c('TypingStates').INACTIVE,init:function i(){this.init=c('emptyFunction');this.reset();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(this._input,'keyup',this._update.bind(this)),c('Run').onUnload(this._onunload.bind(this)));},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c('TypingStates').INACTIVE;},setIgnoreKeys:function i(j){this._ignoreKeys=c('createObjectFrom')(j);},destroy:function i(){this._subscriptions.release();},_onunload:function i(){if(this._currentState==c('TypingStates').TYPING)this._transition(c('TypingStates').QUITTING);},_update:function i(event){var j=c('Event').getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c('Input').getValue(this._input);if(l.trim().length===0){if(k==c('TypingStates').TYPING)this._transition(c('TypingStates').INACTIVE);}else if(k==c('TypingStates').TYPING){this._recordKeystroke();}else if(k==c('TypingStates').INACTIVE){this._transition(c('TypingStates').TYPING);this._recordKeystroke();}}},_transition:function i(j){this.reset();this._currentState=j;this.inform('change',j);},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j){this._transition(c('TypingStates').INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10);}}});f.exports=h;}),null);
__d('TypingDetectorController',['AsyncRequest','AvailableList','AvailableListConstants','ChatVisibility','Keys','MercuryServerRequestsConfig','TypingDetector','TypingStates','emptyFunction','ifRequired','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){this.userID=i;this.input=j;this.source=k;this.threadID=m;this.remoteState=c('TypingStates').INACTIVE;this.notifyTimer=null;l=l||{};this.notifyDelay=l.notifyDelay||this.notifyDelay;this._typingDetector=new (c('TypingDetector'))(j,n);this._typingDetector.init(l);this._typingDetector.subscribe('change',this._stateChange.bind(this));}h.prototype.setUserAndThread=function(i,j){if(this.userID!==i||this.threadID!==j){this.resetState();this.userID=i;this.threadID=j;}};h.prototype.setIgnoreEnter=function(i){var j=i?[c('Keys').RETURN]:[];this._typingDetector.setIgnoreKeys(j);};h.prototype.resetState=function(){this._notifyState(c('TypingStates').INACTIVE);this.remoteState=c('TypingStates').INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};h.prototype.destroy=function(){this.resetState();this._typingDetector.destroy();};h.prototype._stateChange=function(i,j){if(j!=c('TypingStates').QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c('setTimeoutAcrossTransitions')(c('shield')(this._notifyState,this,j),this.notifyDelay);}else this._notifyState(j,true);};h.prototype._notifyState=function(i,j){if(!this.userID&&!this.threadID||!c('ChatVisibility').isOnline()||i===this.remoteState||c('ifRequired')('ChannelConnection',function(k){return k.disconnected();},function(){return true;}))return;this._sendRequest(i,this.userID,j);};h.prototype._sendRequest=function(i,j,k){this.remoteState=i;var l={typ:i,to:j,source:this.source,thread:this.threadID},m=new (c('AsyncRequest'))().setHandler(this._onTypResponse.bind(this,j)).setErrorHandler(c('emptyFunction')).setData(l).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous_DEPRECATED',!k);if(c('MercuryServerRequestsConfig').msgrRegion)m.setRequestHeader('X-MSGR-Region',c('MercuryServerRequestsConfig').msgrRegion);m.send();};h.prototype._onTypResponse=function(i,j){var k=j.getPayload()||{};if(k.offline)c('AvailableList').set(i,c('AvailableListConstants').OFFLINE,'typing_response');};Object.assign(h.prototype,{notifyDelay:1000});f.exports=h;}),null);
__d('EmployeeLinkMatcher',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('^[\\s.,:]'),i=new RegExp('(?:\\b)(([BDTPSX]|(AIP))\\d{4,})(?:\\b)','im'),j=new RegExp('(?:\\b)(designpack:\/\/.+)(?:\\b)','im'),k=function n(o){if(!c('CurrentUser').isEmployee())return null;var p=i.exec(o)||j.exec(o);if(p===null)return null;return {lnk:p[1],idx:p.index+(h.exec(p[0])?1:0)};},l=function n(o){var p=c('CurrentUser').isEmployee()&&(i.exec(o)!==null||j.exec(o)!==null);return p;},m={match:k,isMatch:l};f.exports=m;}),null);
__d('EmployeeLinkRanges',['EmployeeLinkMatcher','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h={PHABRICATOR_PREFIX:'https://phabricator.intern.facebook.com/',TASKS_PREFIX:'https://our.intern.facebook.com/intern/tasks/?t=',BUSINESS_PREFIX:'https://our.intern.facebook.com/intern/business/?q=',SEV_PREFIX:'https://our.intern.facebook.com/intern/sevmanager/view/s/',CHRONOS_PREFIX:'https://our.intern.facebook.com/intern/chronos/lucky/?query=',ADS_PARTNER_PREFIX:'https://our.intern.facebook.com/intern/ads/partner_projects/projects/',get:function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c('EmployeeLinkMatcher').match(l);if(!m)return [];var n=m.lnk,o=m.idx,p=c('UnicodeUtils').strlen(l.substr(0,o));k+=p;var q='';if(n.substr(0,3).toLowerCase()==='aip'){q=this.ADS_PARTNER_PREFIX+n.substr(3);}else switch(n[0].toLowerCase()){case 'd':if(n.indexOf('designpack://')===0){q=n;}else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 'p':q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case 't':q=this.TASKS_PREFIX+n.substr(1);break;case 'b':q=this.BUSINESS_PREFIX+n.substr(1);break;case 's':q=this.SEV_PREFIX+n.substr(1);break;case 'x':q=this.CHRONOS_PREFIX+n.substr(1);break;default:return [];}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r));}};f.exports=h;}),null);
__d('EventReminderDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('EventReminderActions',['EventReminderDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event){c('EventReminderDispatcher').dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event});},deleteEventReminder:function j(k){c('EventReminderDispatcher').dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k});}};f.exports=i;}),null);
__d('EventReminderMembersMap',['CurrentUser','EventReminderConstants','Map'],(function a(b,c,d,e,f,g){'use strict';var h=c('EventReminderConstants').GuestStates;function i(){this.$EventReminderMembersMap1=new (c('Map'))();this.$EventReminderMembersMap2=new (c('Map'))();this.$EventReminderMembersMap3=new (c('Map'))();}i.prototype.setAllMembers=function(j,k){if(!j)return;this.$EventReminderMembersMap1.set(k,h.INVITED);var l=[],m=[],n=[];for(var o in j){var p=j[o];if(o===c('CurrentUser').getID())this.$EventReminderMembersMap1.set(k,p);var q={fbid:o,guestState:p,imageSrc:''};if(p===h.GOING){l.push(q);}else if(p===h.DECLINED){m.push(q);}else n.push(q);}this.$EventReminderMembersMap2.set(k,l.concat(m,n));this.$EventReminderMembersMap3.set(k,l);};i.prototype.clearMembers=function(j){this.$EventReminderMembersMap1['delete'](j);this.$EventReminderMembersMap2['delete'](j);this.$EventReminderMembersMap3['delete'](j);};i.prototype.getAllMembers=function(j){return this.$EventReminderMembersMap2.get(j);};i.prototype.getGoingMembers=function(j){return this.$EventReminderMembersMap3.get(j);};i.prototype.getSelfGuestState=function(j){if(!this.$EventReminderMembersMap1.has(j))return h.INVITED;return this.$EventReminderMembersMap1.get(j);};f.exports=i;}),null);
__d('EventReminderStateStore',['EventReminderActions','EventReminderDispatcher','EventReminderMembersMap','EventRemindersGating','FluxStore','Map'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=3600000;h=babelHelpers.inherits(k,c('FluxStore'));i=h&&h.prototype;function k(){i.constructor.call(this,c('EventReminderDispatcher'));this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new (c('EventReminderMembersMap'))();this.$EventReminderStateStore3=new (c('Map'))();}k.prototype.getEvent=function(l){return this.$EventReminderStateStore1[l];};k.prototype.getEventMembers=function(l){return this.$EventReminderStateStore2.getAllMembers(l);};k.prototype.getSelfGuestState=function(l){return this.$EventReminderStateStore2.getSelfGuestState(l);};k.prototype.getNumOfGoingMembers=function(l){var m=this.$EventReminderStateStore2.getGoingMembers(l);return m?m.length:0;};k.prototype.shouldShowCTA=function(l,m){var n=Date.now(),o=this.$EventReminderStateStore3.get(l);if(m>c('EventRemindersGating').eventPlanCTAThreashold&&(!o||n-o>j)&&c('EventRemindersGating').shouldShowCTA){this.$EventReminderStateStore3.set(l,n);return true;}else return false;};k.prototype.clearEventMembers=function(l){this.$EventReminderStateStore2.clearMembers(l);};k.prototype.__onDispatch=function(l){var m=c('EventReminderActions').Types,n=l.threadID;switch(l.type){case m.UPDATE_EVENT_REMINDER:var event=l.event,o=!!event.track_rsvp;this.$EventReminderStateStore1[n]={allowRSVP:o,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true};if(o)this.$EventReminderStateStore2.setAllMembers(event.event_members,n);break;case m.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[n].exists=false;this.clearEventMembers(n);break;}this.__emitChange();};f.exports=new k();}),null);
__d('MercuryMessageRenderLocations',[],(function a(b,c,d,e,f,g){'use strict';var h={CHAT:'chat',MESSENGER:'messenger',PAGES:'pages'};f.exports=h;}),null);
__d('MessengerSupportedEmojiUtils',['cx','EmojiImageURL','EmojiLikeConstants','EmojiRenderer','EmoticonEmojiList','Image.react','MessengerSupportedEmoji','React','Utf16','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=65039,j='_fe0f',k=new RegExp('(\r\n|[ \r\n]|\s)'),l={getSupportedEmojiKey:function m(n){if(!n)return null;var o=null,p=this.parse(n);if(p.length===1&&p[0].length===n.length){var q=p[0].emoji.map(function(r){return c('Utf16').decode(r);});q[q.length-1]===i&&q.pop();o=q.map(function(r){return r.toString(16);}).join('_');}return this.isSupportedEmojiKey(o)?o:null;},isSupportedEmoji:function m(n){return !!this.getSupportedEmojiKey(n);},isSupportedEmojiKey:function m(n){return !!c('MessengerSupportedEmoji').emoji[n];},getSupportedEmojiCodesArray:function m(n){if(!n)return null;var o=this.parse(n);if(o.length===1&&o[0].length===n.length){var p=o[0].emoji.map(function(r){return c('Utf16').decode(r);});p[p.length-1]===i&&p.pop();var q=p.map(function(r){return r.toString(16);}).join('_');if(c('MessengerSupportedEmoji').emoji[q])return p;}return null;},getEmojiKeyFromCodes:function m(n){return n.map(function(o){return o.toString(16);}).join('_');},getClassSizeMap:function m(){var n,o=c('EmojiLikeConstants').size;return n={},n[o.XSMALL]="_2560",n[o.SMALL]="_1ifu",n[o.MEDIUM]="_19_r",n[o.LARGE]="_19_s",n;},getEmojiMatchObj:function m(n){var o=this.parse(n,1);if(o.length!==1)return null;var p=o[0].emoji,q=p.map(function(s){return c('Utf16').decode(s);});if(q[q.length-1]===i)q.pop();var r=q.map(function(s){return s.toString(16);}).join('_');return {emoji_key:r,emoji_str:p.join(''),is_supported:this.isSupportedEmojiKey(r),offset:o[0].offset,length:o[0].length};},getNewEmojiData:function m(n,o){if(!n)return null;var p=this.getSupportedEmojiKey(n);if(!p)return null;var q=this.getClassSizeMap();o=this.transferSize(o);var r=c('joinClasses')(q[o],"_1ift"),s=c('EmojiImageURL').getMessengerURL(p,c('EmojiLikeConstants').sizeMap[o]);return {emoji:c('React').createElement(c('Image.react'),{className:r,src:s}),emoji_key:p,url:s};},getEmojiOnlyContents:function m(n){var o=n||'',p=[];while(o.length>0&&o.trim().length>0){var q=k.exec(o),r='';while(q&&q.length&&q.index===0){r+=q[0];o=o.replace(k,'');q=k.exec(o);}if(r.length>0)p.push({text:r});var s=c('EmoticonEmojiList').noncapturingRegexp.exec(o);if(s&&s.index===0){var t=c('EmoticonEmojiList').names[s[1]],u=c('EmoticonEmojiList').emote2emojis[t];p.push({emojiKey:u,text:s[1]});o=o.replace(s[1],'');}else{s=this.getEmojiMatchObj(o);if(s&&s.is_supported){p.push({emojiKey:s.emoji_key,text:s.emoji_str});o=o.replace(s.emoji_str,'');}else return null;}}return p;},getUrl:function m(n,o){if(n.endsWith(j))n=n.replace(j,'');if(!c('MessengerSupportedEmoji').emoji[n])return null;o=this.transferSize(o);return c('EmojiImageURL').getMessengerURL(n,c('EmojiLikeConstants').sizeMap[o]);},containsEmoji:function m(n){return this.parse(n,1).length===1;},parse:function m(n,o){return c('EmojiRenderer').parse(n,o);},transferSize:function m(n){return c('EmojiLikeConstants').sizeMapTransfer[n]||n;}};f.exports=l;}),null);
__d('MessengerTextWithEntities.react',['Link.react','React','BaseTextWithEntities.react','MessengerTextWithEmoticons.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(l){return l.replace(/<3\b|&hearts;/g,'\u2665');}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerTextWithEntities1=function(q){if(this.props.renderEmoticons||this.props.renderEmoji){return c('React').createElement(c('MessengerTextWithEmoticons.react'),{text:q,customSize:this.props.customSize,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji});}else return j(q);}.bind(this),this.$MessengerTextWithEntities2=function(q,r){if(this.props.interpolator){return this.props.interpolator(q,r);}else return c('React').createElement(c('Link.react'),{href:r.entity},q);}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('BaseTextWithEntities.react'),babelHelpers['extends']({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$MessengerTextWithEntities2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$MessengerTextWithEntities1}));};f.exports=k;}),null);
__d('P2PTriggersUtils',['P2PGKValues'],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c('P2PGKValues').P2PEnabled)return false;return true;},getMatches:function j(k){return k.match(h);}};f.exports=i;}),null);
__d('RedditLinkMatcher',[],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('(?:^|\\s)(\\/[ru]\\/[a-zA-Z0-9_]{1,21})(?:\\b)','im'),i=function l(m){var n=h.exec(m);if(n===null)return null;return {lnk:n[1],idx:n.index};},j=function l(m){return h.exec(m)!==null;},k={match:i,isMatch:j};f.exports=k;}),null);
__d('RedditLinkRanges',['RedditLinkMatcher','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h={REDDIT_PREFIX:'https://reddit.com',get:function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c('RedditLinkMatcher').match(l);if(!m)return [];var n=m.lnk,o=m.idx,p=c('UnicodeUtils').strlen(l.substr(0,o));k+=p;var q='';switch(n[1].toLowerCase()){case 'r':q=this.REDDIT_PREFIX+n;break;case 'u':q=this.REDDIT_PREFIX+n;break;default:return [];}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r));}};f.exports=h;}),null);
__d('shouldAddMRefParam',['isFacebookURI'],(function a(b,c,d,e,f,g){var h=function i(j){if(!c('isFacebookURI')(j)||j.getFragment())return false;if(/^\/events\//.test(j.getPath()))return true;return false;};f.exports=h;}),null);
__d('MercuryMessageBody.react',['cx','fbt','BootloadedComponent.react','DateConsts','EmojiRenderer','EmoticonsList','EmoticonEmojiList','EmployeeLinkMatcher','EmployeeLinkRanges','EventReminderStateStore','EventRemindersGating','RedditLinkMatcher','RedditLinkRanges','JSResource','Link.react','MercuryConfig','MercuryMessageRenderLocations','MessengerSupportedEmojiUtils','MessengerTextWithEntities.react','P2PTriggersUtils','React','TextWithEntities.react','TextWithEntitiesMetadataType','URI','URLMatcher','emptyFunction','getURLRanges','ifRequired','shouldAddMRefParam'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=function o(){m=c('emptyFunction');c('ifRequired')('ChatAppActions',function(p){p.setInitialDisplayDone();});};j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.targetBlankLinkInterpolator=function(t,u){if(u.className)return c('React').createElement('span',{className:u.className},t);if(u.id){var v={};if(!this.props.isFromViewer&&this.props.threadCustomColor)v.color=this.props.threadCustomColor;return c('React').createElement(c('Link.react'),{className:"_ih-",href:u.url,style:v,onClick:this.props.onContactSelect?this.props.onContactSelect.bind(this,u):undefined},t);}if(u.entity&&u.entity.url){var w=new (c('URI'))(u.entity.url.replace(/#+$/,''));if(c('shouldAddMRefParam')(w))w.addQueryData({__mref:'mb'});return c('React').createElement(c('Link.react'),{href:{url:w.toString(),shimhash:u.entity.shimhash},s:u.entity.s,target:'_blank'},t);}else if(!u.entity)switch(u.type){case c('TextWithEntitiesMetadataType').NONE:return c('React').createElement('span',{className:"_2y9",title:JSON.stringify(u.data)},t);case c('TextWithEntitiesMetadataType').CONCEPT:return this.renderConceptMetadata(t,u.data);case c('TextWithEntitiesMetadataType').INTENT:return this.renderIntentMetadata(t,u.data);default:return t;}return t;}.bind(this),p;}n.prototype.renderConceptMetadata=function(o,p){if(!p)return o;if(p.intent_name||p.name)return this.renderIntentMetadata(o,p);return o;};n.prototype.renderIntentMetadata=function(o,p){if(!p)return o;var q=p.intent_name||p.name;switch(q){case 'request_time':return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ServicesVerticalRequestTimeTriggers.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null,o),data:p,text:o,threadID:this.props.threadID});case 'timestamp':return this.props.renderLocation===c('MercuryMessageRenderLocations').CHAT&&this.$MercuryMessageBody1(p.value)&&c('EventRemindersGating').shouldShowTriggerWords?c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEventPlanTriggers.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null,o),data:p,text:o,threadID:this.props.threadID}):o;default:return o;}};n.prototype.renderIntentCTA=function(o){if(o){var p=o.intent_name||o.name;switch(p){case 'request_time':return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ServicesRequestTimeIntentCTA.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null),data:o,threadID:this.props.threadID});case 'create_event':var q=this.props.threadID;return q&&c('EventReminderStateStore').shouldShowCTA(q,o.confidence)&&this.props.renderLocation===c('MercuryMessageRenderLocations').CHAT?c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatEventPlanCTA.react').__setRef('MercuryMessageBody.react'),bootloadPlaceholder:c('React').createElement('span',null),data:o,threadID:q}):null;}}return null;};n.prototype.renderCTAs=function(o){var p=null;if(o.length>0){var q=o[0]||{};switch(q.type){case c('TextWithEntitiesMetadataType').CONCEPT:case c('TextWithEntitiesMetadataType').INTENT:p=this.renderIntentCTA(q.data);break;}}return p;};n.prototype.render=function(){var o=this.props,p=o.body,q=o.ranges,r=o.metaRanges;p=p||'';if(p.startsWith('?OTR'))return c('React').createElement('span',{className:"_89h"},i._("[message chiffr\u00e9]"));p=p.replace(/\s+$/,'');if(p.length===0)return null;var s=false,t=!!(this.props.threadID&&c('P2PTriggersUtils').canSeeTriggers(this.props.threadID)&&c('P2PTriggersUtils').getMatches(p));if(q&&q.length||r&&r.length||c('EmoticonsList').noncapturingRegexp.test(p)||c('EmojiRenderer').containsEmoji(p)||c('URLMatcher').match(p)||c('EmployeeLinkMatcher').isMatch(p)||c('RedditLinkMatcher').isMatch(p)||t||c('MessengerSupportedEmojiUtils').containsEmoji(p)||c('EmoticonEmojiList').noncapturingRegexp.test(p))s=true;if(!s){m();return c('React').createElement('span',{className:this.props.className},p);}if(q&&q.length===1&&q[0].className==="__in")q=c('getURLRanges')(p).concat(q);if(q==undefined){q=c('getURLRanges')(p);}else q=q.concat(c('getURLRanges')(p));if(q==undefined){q=c('EmployeeLinkRanges').get(p);}else{q=q.concat(c('EmployeeLinkRanges').get(p));q=q.filter(function(y){return y!=undefined;});}if(c('MercuryConfig').WWWRedditLinksGK)if(q==undefined){q=c('RedditLinkRanges').get(p);}else{q=q.concat(c('RedditLinkRanges').get(p));q=q.filter(function(y){return y!=undefined;});}var u={className:this.props.className,interpolator:this.targetBlankLinkInterpolator,metaRanges:this.$MercuryMessageBody2(this.props.metaRanges||[]),ranges:q,renderEmoji:true,renderEmoticons:true,text:p},v=c('React').createElement(c('TextWithEntities.react'),u);m();if(t){return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:v,bootloadLoader:c('JSResource')('TextWithEntitiesAndP2P.react').__setRef('MercuryMessageBody.react')},u,{getMessengerEmote:this.$MercuryMessageBody3,isSupportedEmoji:this.$MercuryMessageBody4,threadID:this.props.threadID}));}else{var w=this.renderCTAs(this.props.metaRanges||[]),x=c('React').createElement(c('MessengerTextWithEntities.react'),u);if(!w)return x;return c('React').createElement('span',null,x,w);}};n.prototype.$MercuryMessageBody4=function(o){return c('MessengerSupportedEmojiUtils').isSupportedEmojiKey(o);};n.prototype.$MercuryMessageBody3=function(o){var p=c('EmoticonEmojiList').emote2emojis[o];return c('MessengerSupportedEmojiUtils').isSupportedEmojiKey(p)?p:null;};n.prototype.$MercuryMessageBody1=function(o){var p=new Date(o*c('DateConsts').MS_PER_SEC),q=new Date(Date.now()+5*c('DateConsts').MS_PER_MIN),r=new Date(new Date().setFullYear(new Date().getFullYear()+1));return p>q&&p<r;};n.prototype.$MercuryMessageBody2=function(o){var p=o.filter(function(q){return q.data&&(q.data.intent_name==='create_event'||q.data.name==='create_event');});return p.length!==0?p:o;};n.propTypes={body:l.string,customLike:l.object,isFromViewer:l.bool,metaRanges:l.array,ranges:l.array,threadCustomColor:l.string,threadID:l.string,onContactSelect:l.func,renderLocation:l.oneOf([c('MercuryMessageRenderLocations').CHAT,c('MercuryMessageRenderLocations').MESSENGER,c('MercuryMessageRenderLocations').PAGES])};f.exports=n;}),null);
__d('MercuryMessageDeliveryState',[],(function a(b,c,d,e,f,g){'use strict';var h={SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1};f.exports=h;}),null);
__d('MercuryMessageInfo',['MercuryActionStatus','MercuryMessageDeliveryState','MercuryViewer'],(function a(b,c,d,e,f,g){'use strict';var h={isOutbound:function i(j){return j.author===c('MercuryViewer').getID();},isInbound:function i(j){return !h.isOutbound(j);},isSending:function i(j){return j.status===c('MercuryActionStatus').UNSENT||j.status===c('MercuryActionStatus').UNCONFIRMED||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').RESENDING;},isSent:function i(j){return j.status===undefined||j.status===c('MercuryActionStatus').SUCCESS;},hasError:function i(j){return j.status===c('MercuryActionStatus').FAILED_UNKNOWN_REASON||j.status===c('MercuryActionStatus').UNABLE_TO_CONFIRM||j.status===c('MercuryActionStatus').ERROR;},getDeliveryState:function i(j,k){if(this.hasError(j))return c('MercuryMessageDeliveryState').ERROR;if(this.isSending(j))return c('MercuryMessageDeliveryState').SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c('MercuryMessageDeliveryState').DELIVERED;return c('MercuryMessageDeliveryState').SENT;}return c('MercuryMessageDeliveryState').UNKNOWN;}};f.exports=h;}),null);
__d('MercuryErrorInfo',['fbt','MercuryErrorType','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){var i={getMessage:function j(k){var l='';if(i.isConnectionError(k)){l=h._("Ce message n\u2019a pas \u00e9t\u00e9 envoy\u00e9.");if(i.isTransient(k))l=h._("{message} V\u00e9rifiez votre connexion Internet et cliquez pour r\u00e9essayer.",[h.param('message',l)]);}else{if(k&&k.description){l=k.description;}else l=h._("Le message n\u2019a pas pu \u00eatre envoy\u00e9.");if(i.isTransient(k))l=h._("{message} Cliquez pour renvoyer.",[h.param('message',l)]);}return l;},isConnectionError:function j(k){if(k&&k.type==c('MercuryErrorType').TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function j(k){return k&&k.is_transient;},isPermanent:function j(k){return k?!this.isTransient(k):false;},hasErrorStatus:function j(k){return c('MercuryMessageInfo').hasError(k);}};f.exports=i;}),null);
__d('MercuryMessageError.react',['cx','CurrentUser','ImmutableObject','Link.react','MercuryErrorInfo','MercuryMessageActions','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c('MercuryErrorInfo').isTransient(t))c('MercuryMessageActions').getForFBID(this.props.authorFBID).resend(this.props.message);}.bind(this),this.$MercuryMessageError1=function(r){if(c('MercuryErrorInfo').hasErrorStatus(r)){return "_2fs2"+(' '+"_2fs3")+(c('MercuryErrorInfo').isTransient(r.error_data)?' '+"_2fs4":'')+(c('MercuryErrorInfo').isPermanent(r.error_data)?' '+"_2fs5":'');}else return "_2fs6 _2fs2";},n;}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{href:'#',className:c('joinClasses')(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c('MercuryErrorInfo').isTransient(n)?0:null,onClick:this.messageResend}),c('React').createElement('i',{className:"_2fs1"}),c('React').createElement('span',{dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}));};l.prototype.$MercuryMessageError2=function(m){var n='',o=m.error_data;if(c('MercuryErrorInfo').hasErrorStatus(m)){var p=c('MercuryErrorInfo').getMessage(o);if(p)n=p.toString();}if(typeof n==='object'&&n.__html)n=n.__html;return n;};l.propTypes={authorFBID:k.string,message:k.instanceOf(c('ImmutableObject')).isRequired};l.defaultProps={authorFBID:c('CurrentUser').getID()};f.exports=l;}),null);
__d('MessengerBotsWebTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerBotsWebLoggerConfig',this.$MessengerBotsWebTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerBotsWebLoggerConfig',this.$MessengerBotsWebTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerBotsWebTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerBotsWebTypedLogger1=babelHelpers['extends']({},this.$MessengerBotsWebTypedLogger1,j);return this;};h.prototype.setCount=function(j){this.$MessengerBotsWebTypedLogger1.count=j;return this;};h.prototype.setEvent=function(j){this.$MessengerBotsWebTypedLogger1.event=j;return this;};h.prototype.setIndex=function(j){this.$MessengerBotsWebTypedLogger1.index=j;return this;};h.prototype.setPageID=function(j){this.$MessengerBotsWebTypedLogger1.page_id=j;return this;};h.prototype.setPayload=function(j){this.$MessengerBotsWebTypedLogger1.payload=j;return this;};h.prototype.setTitle=function(j){this.$MessengerBotsWebTypedLogger1.title=j;return this;};h.prototype.setTitles=function(j){this.$MessengerBotsWebTypedLogger1.titles=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setType=function(j){this.$MessengerBotsWebTypedLogger1.type=j;return this;};h.prototype.setURL=function(j){this.$MessengerBotsWebTypedLogger1.url=j;return this;};h.prototype.setVC=function(j){this.$MessengerBotsWebTypedLogger1.vc=j;return this;};var i={count:true,event:true,index:true,page_id:true,payload:true,title:true,titles:true,type:true,url:true,vc:true};f.exports=h;}),null);
__d('MessengerMessageActionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageActionsLoggerConfig',this.$MessengerMessageActionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerMessageActionsLoggerConfig',this.$MessengerMessageActionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageActionsTypedLogger1,j);return this;};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this;};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this;};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this;};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this;};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this;};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this;};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this;};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this;};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this;};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this;};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this;};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this;};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this;};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this;};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this;};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this;};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers['extends']({},this.$MessengerMessageActionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h;}),null);
__d('MessengerWebViewReactionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerWebViewReactionsLoggerConfig',this.$MessengerWebViewReactionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerWebViewReactionsLoggerConfig',this.$MessengerWebViewReactionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers['extends']({},this.$MessengerWebViewReactionsTypedLogger1,j);return this;};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this;};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this;};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this;};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this;};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this;};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this;};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h;}),null);
__d('MessagesViewer',['AsyncRequest','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','emptyFunction','ge'],(function a(b,c,d,e,f,g){var h={renderSpotlight:function j(k,l,m,n){var o=k.setID;if(!o)o=c('MessagesViewerSetID').MESSAGES;i(c('React').createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c('PhotoStore').hasBeenCreated(o)&&k.endpoint){var p=new (c('AsyncRequest'))(k.endpoint);if(l)p.setRelativeTo(l);p.send();}},renderVideo:function j(k){i(k);}};function i(j){var k=c('ge')('messages_viewer');if(!k){k=c('DOM').create('div',{id:'messages_viewer'});document.body.appendChild(k);}c('ReactDOM').render(j,k,function(){this.subscribeOnce('close',function(){c('ReactDOM').unmountComponentAtNode(k);});});}f.exports=h;}),null);
__d('MercuryAttachmentViewer',['Bootloader','MessagesViewer','React','Run','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={renderVideo:function i(j){c('Bootloader').loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c('MessagesViewer').renderVideo(c('React').createElement(k,babelHelpers['extends']({},j,{forwardDialogComponent:l})));},'MercuryAttachmentViewer');},bootstrapWithConfig:function i(j,k){c('Bootloader').loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c('MessagesViewer').renderSpotlight(j,k,l,m);},'MercuryAttachmentViewer');},preload:function i(){c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c('emptyFunction'),'MercuryAttachmentViewer');});}};f.exports=h;}),null);
__d('ChatFlyoutPlaceholder.react',['React','XUISpinner.react'],(function a(b,c,d,e,f,g){'use strict';var h={padding:'30px',textAlign:'center'},i=function j(){return c('React').createElement('div',{style:h},c('React').createElement(c('XUISpinner.react'),{size:'large'}));};f.exports=i;}),null);
__d('ChatPhotoUploader.react',['cx','fbt','Promise','Bootloader','ifRequired','InlineBlock.react','Link.react','MercuryConfig','MessengerEnvironment','React','ReactDOM','SubscriptionsHandler','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatPhotoUploader',_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,customUI:j.bool,disabled:j.bool,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,threadID:j.string,onSubmit:j.func,onAllUploadsComplete:j.func,onLastUploadFail:j.func,onLastUploadCancel:j.func,onMount:j.func,onUploadError:j.func},getDefaultProps:function l(){return {actionURI:c('MercuryConfig').upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:c('emptyFunction'),onAllUploadsComplete:c('emptyFunction'),onLastUploadFail:c('emptyFunction'),onLastUploadCancel:c('emptyFunction')};},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled;},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'ChatPhotoUploader.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'ChatPhotoUploader.react');},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function l(){var m=this.props.imagesOnly?i._("Ajouter des photos"):i._("Ajouter des fichiers"),n=c('joinClasses')("_4q61"+(!this.props.customUI?' '+"_5f0v":'')+(!this.props.customUI?' '+"_509v":''),this.props.linkClassName),o=c('MercuryConfig').WWWMessengerUploadFilesPreview;return c('React').createElement('form',{action:this.props.actionURI,className:"_vzk",title:m,method:'post',onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault();}.bind(this),ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:this.props.imagesOnly}),c('React').createElement(c('InlineBlock.react'),{onClick:o?c('emptyFunction'):this._bootloadChatAutoSendPhotoUploader,className:c('joinClasses')(this.props.className,"_m _4q60 _3rzn")},c('React').createElement('input',{disabled:this.props.disabled,type:'file',className:c('joinClasses')(this.props.inputClassname,"_n _2__f"),name:'attachment[]',multiple:'true',accept:this.props.imagesOnly?'image/*':'*',ref:'input',title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID);}.bind(this):c('emptyFunction')}),c('React').createElement(c('Link.react'),{className:n,tabIndex:-1},c('React').createElement('i',{className:this.props.imageClassName,alt:i._("Appareil photo")}))));},_handleInputOnChange:function l(event,m){c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(n){return n.prepareFilesForSend(m,event.target.files);},function(){c('Bootloader').loadModules(["MessengerActions"],function(n){n.prepareFilesForSend(m,event.target.files);},'ChatPhotoUploader.react');}):c('ifRequired')('FantaMessageActions',function(n){return n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),function(){c('Bootloader').loadModules(["FantaMessageActions"],function(n){n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),'ChatPhotoUploader.react');}.bind(this));},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n);},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup();},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup();},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving;},_bootloadChatAutoSendPhotoUploader:function l(){if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new (c('Promise'))(function(m){c('Bootloader').loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID),c('MercuryConfig').msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('submit',this._handleSubmit),o.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),o.subscribe('last-upload-failed',this._handleLastUploadFailed),o.subscribe('last-upload-canceled',this._handleLastUploadCanceled),o.subscribe('file-upload-error',this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader);}.bind(this),'ChatPhotoUploader.react');}.bind(this));}return this._uploaderPromise;},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m);}).done();},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m);}).done();},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});f.exports=k;}),null);
__d('MercuryTypingAnimation.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m="_4a0v"+(this.props.color==='light'?' '+"_4a0w":'')+(this.props.color==='dark'?' '+"_4a0x":'');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,m)},c('React').createElement('div',{className:"_4b0g"},c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"})));};function l(){i.apply(this,arguments);}l.propTypes={color:k.oneOf(['light','dark'])};l.defaultProps={color:'dark'};f.exports=l;}),null);
__d('ChatTypingIndicator.react',['cx','fbt','ChatConfig','Image.react','MercuryParticipants','MercuryTypingAnimation.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('ChatConfig').get('chattab_rounded_profile',false),l=c('React').createClass({displayName:'ChatTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{userID:j.string,showName:j.bool},render:function n(){var o=void 0;if(this.props.userID)o=c('MercuryParticipants').getNow(this.props.userID);if(!o)return null;return c('React').createElement('div',{className:"_4tdt"},m(o),this._renderBubble());},getBubble:function n(){return this.refs.bubble;},_renderBubble:function n(){var o=this.props.showName;return c('React').createElement('div',{className:"_4tdv"},c('React').createElement('div',{className:"_5wd4"+(' '+"_1nc7")+(' '+"_2cnu")+(o?' '+"_5ysy":'')},c('React').createElement('div',{className:"_5wd9"+(' '+"_n4o")},c('React').createElement('div',{className:"_5w1r"+(' '+"_5wdf")+(' '+"_3_om")},c('React').createElement(c('MercuryTypingAnimation.react'),{className:"_5x7x",ref:'bubble'})))));}});function m(n){var o=i._("{name}",[i.param('name',n.name)]);return c('React').createElement('div',{className:"_31o4"+(k?' '+"_3njy":'')},c('React').createElement('a',{'aria-label':o,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':o,'data-tooltip-position':'left',href:n.href||'#',ref:'link'},c('React').createElement(c('Image.react'),{src:n.image_src,ref:'image'})));}f.exports=l;}),null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryThreadIDMap','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=30000;function j(k){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c('MercuryDispatcher').getForFBID(k);this.$MercuryTypingReceiver3.subscribe('update-typing-state',function(m,n){var o=n.payload_source;if(o!=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c('MercuryActionType').USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c('MercuryViewer').getID())this.$MercuryTypingReceiver4(r.thread_id,r.author);}.bind(this));}.bind(this));var l=[c('ChannelConstants').getArbiterType('typ'),c('ChannelConstants').getArbiterType('ttyp')];if(!c('FBID').isUser(k))l.push(c('ChannelConstants').getArbiterType('page_typing'));c('Arbiter').subscribe(l,function(m,n){var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c('MercuryIDs').getParticipantIDFromUserID(o.from.toString());if(o.st==c('TypingStates').TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!r&&this.$MercuryTypingReceiver7(p);}else if(o.st==c('TypingStates').INACTIVE)this.$MercuryTypingReceiver4(p,q);}}.bind(this));}j.prototype.$MercuryTypingReceiver8=function(k){'use strict';var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o];});return m;};j.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true;}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n);}if(!c('isEmpty')(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};j.prototype.$MercuryTypingReceiver4=function(k,l){'use strict';if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k);}};j.prototype.$MercuryTypingReceiver9=function(k){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',k);};j.prototype.$MercuryTypingReceiver7=function(k){'use strict';var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l);};j.prototype.$MercuryTypingReceiver5=function(k){'use strict';if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==='typ'||k.type==='page_typing')return c('MercuryIDs').getThreadIDFromUserID(k.from.toString());return null;};c('mixInEventEmitter')(j,{'state-changed':true});Object.assign(j,c('MercurySingletonMixin'));f.exports=j;}),null);
__d('ChatTypingIndicators.react',['fbt','ChatTypingIndicator.react','DOM','MercuryIDs','MercuryThreadInformer','MercuryThreads','MercuryTypingReceiver','MercuryParticipants','React','ReactDOM','SubscriptionsHandler','TooltipData','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g,h){var i=c('MercuryThreads').get(),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatTypingIndicators',propTypes:{indicatorClass:j.func,indicatorsWillShow:j.func,indicatorsDidShow:j.func,rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired},getDefaultProps:function l(){return {indicatorClass:c('ChatTypingIndicator.react'),indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:c('emptyFunction')};},getInitialState:function l(){return {typingUserIDs:[]};},componentDidMount:function l(){var m=c('MercuryThreadInformer').getForFBID(this.props.viewer),n=c('MercuryTypingReceiver').getForFBID(this.props.viewer);this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(n.addRetroactiveListener('state-changed',this.typingStateChanged),m.subscribe('messages-received',this.messagesReceived));},componentWillReceiveProps:function l(m){if(m.threadID!=this.props.threadID)this.setState({typingUserIDs:[]});},componentWillUpdate:function l(m,n){if(n.typingUserIDs.length>0)this.props.indicatorsWillShow();},componentDidUpdate:function l(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();c('MercuryParticipants').getMulti(this.state.typingUserIDs,function(m){if(this.isMounted())this.state.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c('TooltipData').set(c('ReactDOM').findDOMNode(p),this.renderTooltip(o.short_name),'above','left');}.bind(this));}.bind(this));},componentWillUnmount:function l(){this._subscriptions.release();},render:function l(){if(!c('MercuryIDs').isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c('MercuryIDs').isGroupChat(this.props.threadID);return c('React').createElement('div',{className:this.props.rootClassName},this.state.typingUserIDs.map(function(o){return this._renderTypingIndicator(o,!!n);}.bind(this)));},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass;return c('React').createElement(o,{key:m,ref:m,showName:n,userID:m});},renderTooltip:function l(m){var n=c('DOM').create('span');c('ReactDOM').render(c('React').createElement('span',null,h._("{name} est en train d\u2019\u00e9crire...",[h.param('name',m)])),n);return n;},typingStateChanged:function l(m){if(this.props.threadID in m)this.setState({typingUserIDs:m[this.props.threadID].slice().sort()});},messagesReceived:function l(m,n){if(this.props.threadID in n){var o=n[this.props.threadID],p=c('createObjectFrom')(o.map(function(q){return q.author;}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(q){return !p[q];}).sort()});}}});f.exports=k;}),null);
__d('FantaTypeFileUploader',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={ANIMATED_IMAGE:'animated_image',AUDIO:'audio',FILE:'file',GENERIC_ATTACHMENT:'generic_attachment',IMAGE:'image',VIDEO:'video'},k={uploadedFiles:c('immutable').Map(),uploadingFiles:c('immutable').Map()};h=babelHelpers.inherits(l,c('immutable').Record(k));i=h&&h.prototype;l.prototype.getTypeIDs=function(m){return this.uploadedFiles.reduce(function(n,o){if(o.type===m&&o.uploadedID)n=n.concat(o.uploadedID);return n;},[]);};function l(){h.apply(this,arguments);}l.fileTypes=j;f.exports=l;}),null);
__d('MessageThreadAssociatedObjectUtils',['TimeSpentRoomTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRender:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;},isLinkedToGroupChat:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;}};f.exports=h;}),null);
__d('MessengerAdminGroupUtils',['fbt','MercuryConfig','MercuryIDs','MessageThreadAssociatedObjectUtils','MessengerApprovalModeTypes','MessengerJoinableModeType','MessengerParticipantAddModeTypes','WorkModeConfig'],(function a(b,c,d,e,f,g,h){'use strict';var i={isJoinableAndOpenThread:function j(k){return this.isJoinableThread(k)&&this.isApprovalOpenThread(k);},isJoinableAndApprovalRequiredThread:function j(k){return !!(this.isJoinableThread(k)&&k&&k.approval_mode===c('MessengerApprovalModeTypes').APPROVALS);},shouldAddToApprovalQueue:function j(k,l){return !!(this.isJoinableAndApprovalRequiredThread(k)&&k&&!i.isViewerAdmin(k.admin_ids,l));},isJoinableThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.is_thread_queue_enabled===true&&k.joinable_mode&&k.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE);},isGroupChat:function j(k){return !!(k&&c('MessageThreadAssociatedObjectUtils').isLinkedToGroupChat(k.associated_object));},shouldInvite:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.participant_add_mode===c('MessengerParticipantAddModeTypes').INVITE);},isApprovalOpenThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.approval_mode===c('MessengerApprovalModeTypes').OPEN);},isOwner:function j(k,l){return k&&this.isJoinableThread(l);},canSeeGroupOptions:function j(k,l,m){var n=c('WorkModeConfig').is_work_user;return !n&&this.isJoinableThread(l);},canMakeOthersAdmins:function j(k,l,m){return this.isOwner(k,m)&&!l;},canMakeSelfAdmin:function j(k,l){return this.isJoinableThread(l)&&l.admin_ids.length===0&&k;},canRemoveAdmin:function j(k,l,m){return this.isOwner(k,m)&&l;},canRemoveFromGroup:function j(k,l){return this.isOwner(k,l)||!this.isJoinableThread(l);},showJoinableLink:function j(k){var l=!!(k&&k.joinable_mode&&k.joinable_mode.link),m=i.isJoinableThread(k);return m&&l;},showJoinableApprovalToggle:function j(k,l){if(k.associated_object&&!k.associated_object.approval_mode_toggleable)return false;var m=i.isViewerAdmin(k.admin_ids,l);return i.isOwner(m,k);},showApprovalQueue:function j(k,l){var m=i.isViewerAdmin(k.admin_ids,l),n=i.isOwner(m,k),o=0;if(k&&k.approval_queue_ids&&k.approval_queue_ids.length)o=k.approval_queue_ids.length;var p=i.isJoinableAndApprovalRequiredThread(k);return p&&n&&o>0;},showParticipantsModal:function j(k,l,m){return this.isJoinableThread(m)&&!k&&!l;},canUpdateThreadCustomization:function j(k,l){var m=i.isJoinableThread(k),n=i.isViewerAdmin(k.admin_ids,l);return k.is_subscribed&&(!m||n);},isViewerAdmin:function j(k,l){return this.isAdmin(k,c('MercuryIDs').getParticipantIDFromUserID(l));},isAdmin:function j(k,l){return k!==null&&k!==undefined&&k.indexOf(l)!==-1;},getLeaveGroupBodyText:function j(k,l){return this.isOwner(k,l)?h._("Si vous quittez ce groupe, vous n\u2019en serez plus propri\u00e9taire, et d\u2019autres membres pourront le g\u00e9rer. Vous ne pourrez plus envoyer ou recevoir de nouveaux messages."):h._("Vous ne recevrez plus de messages de cette conversation et les personnes verront que vous l\u2019avez quitt\u00e9e.");},getLeaveGroupTitleText:function j(k,l){return this.isOwner(k,l)?h._("Quitter cette conversation?"):h._("Quitter la conversation?");},getLeaveGroupButtonText:function j(k,l){return this.isOwner(k,l)?h._("Quitter la conversation"):h._("Quitter");},getMakeOwnerBodyText:function j(k,l){return k?h._("En tant que propri\u00e9taire du groupe, vous pourrez en g\u00e9rer la propri\u00e9t\u00e9 et retirer des membres de la conversation. Seuls les propri\u00e9taires peuvent ajouter d\u2019autres propri\u00e9taires."):h._("En tant que propri\u00e9taire du groupe, {owner's name} pourra en g\u00e9rer la propri\u00e9t\u00e9 et retirer des membres de la conversation. Il pourra supprimer le droit de propri\u00e9t\u00e9 d\u2019autres propri\u00e9taires.",[h.param('owner\'s name',l)]);},getMakeOwnerTitleText:function j(k){return k?h._("Devenir le propri\u00e9taire du groupe?"):h._("Ajouter un propri\u00e9taire au groupe?");},getMakeOwnerButtonText:function j(k){return k?h._("Devenez propri\u00e9taire"):h._("D\u00e9finir comme propri\u00e9taire");},getRemoveOwnerBodyText:function j(k,l,m){var n=void 0;if(k&&l){n=h._("Vous ne g\u00e9rerez plus les propri\u00e9taires du groupe et ne pourrez plus supprimer de membres de cette conversation. Vous serez toujours un participant au groupe. Tout autre membre pourra devenir propri\u00e9taire du groupe.");}else if(k&&!l){n=h._("Vous ne g\u00e9rerez plus les propri\u00e9taires du groupe et ne pourrez plus supprimer de membres de cette conversation. Vous serez toujours un participant au groupe.");}else n=h._("{owner's name} ne g\u00e9rera plus la propri\u00e9t\u00e9 du groupe et ne pourra plus retirer des membres de la conversation. Il restera participant dans le groupe.",[h.param('owner\'s name',m)]);return n;}};f.exports=i;}),null);
__d('MessagingFlowerCornerArrangements',['invariant','ix','Random','randomShuffle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={TOP_LEFT:'topLeft',BOTTOM_RIGHT:'bottomRight'},k={PINK:'pink',PURPLE:'purple',YELLOW:'yellow'},l={ROUND:'round',POINTY:'pointy'},m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c('Random').random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c('Random').random()>=.5?l.ROUND:l.POINTY];c('randomShuffle')(t);c('randomShuffle')(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]));}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999");}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000");}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r);};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop();};n.prototype.flower=function(r){var s=c('Random').random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y});};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y});};n.prototype.$ElementProducer9=function(r,s){var t=s.pivot*100+'%',u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,aa=void 0,ba=void 0,ca=void 0;if(this.$ElementProducer2){var da=u;u=v;v=da;y=-y;}if(this.$ElementProducer1===j.BOTTOM_RIGHT){ca=this.$ElementProducer4+u+'px';aa=this.$ElementProducer4+v+'px';w=100+w;y+=180;}else if(this.$ElementProducer1===j.TOP_LEFT){ba=this.$ElementProducer4+u+'px';z=this.$ElementProducer4+v+'px';}else h(0);var ea=[];if(w!==0)ea.push('translate('+w+'%, '+w+'%)');ea.push('scale('+x+')');if(y!==0)ea.push('rotate('+y+'deg)');return {style:{bottom:aa,left:ba,position:'absolute',right:ca,top:z,transform:ea.join(' '),transformOrigin:t+' '+t},image:r};};function o(r){return [r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})];}function p(r){return [r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})];}function q(r,s){var t=new n(r,s);return c('Random').random()<.5?o(t):p(t);}f.exports={createFlowers:q,corners:j};}),null);
__d('MessagingFlowerBorder.react',['Image.react','MessagingFlowerCornerArrangements','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.TOP_LEFT,this.props.offset).concat(c('MessagingFlowerCornerArrangements').createFlowers(c('MessagingFlowerCornerArrangements').corners.BOTTOM_RIGHT,this.props.offset));}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m;}k.prototype.render=function(){return c('React').createElement('div',null,this.state.elements.map(function(l,m){return c('React').createElement(c('Image.react'),{key:m,style:l.style,src:l.image});}));};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k;}),null);
__d('MessagingGiftWrap.react',['cx','MessengerEnvironment','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap();}.bind(this),n;}l.prototype.render=function(){var m=c('MessengerEnvironment').messengerui;return c('React').createElement('div',{className:"_4p0m"+(this.state.unwrapped?' '+"_4p0o":'')+(m?' '+"_mxz":'')+(m?' '+"_4br2":'')+(!m?' '+"_3_om":'')+(this.props.isSticker?' '+"_52vq":''),onClick:this.$MessagingGiftWrap1,role:'presentation'},c('React').createElement('div',{className:"_4p0r"}),c('React').createElement('div',{className:"_4p0s _4p0t"}),c('React').createElement('div',{className:"_4p0s _4p0u"}));};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c('emptyFunction')};f.exports=l;}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1491398900900362";};j.getQueryID=function(){"use strict";return "254517288326467";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('ContextualLayerAutoFlipHorizontal',['ContextualLayerAutoFlip'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ContextualLayerAutoFlip'));i=h&&h.prototype;j.prototype.getValidPositions=function(k){'use strict';return [k.getPosition()];};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('MessengerReactionsContextualDialog.react',['cx','AccessibleLayer','ContextualLayerAutoFlipHorizontal','ContextualLayerHideOnScrollOut','ContextualLayerUpdateOnScroll','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('ContextualLayerHideOnScrollOut'),c('ContextualLayerUpdateOnScroll'),c('LayerHideOnEscape'),c('AccessibleLayer')],displayName:'MessengerReactionsContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_4owc"}}));f.exports=i;}),null);
__d('MessengerReactionsUtil',['EmojiFormat'],(function a(b,c,d,e,f,g){'use strict';var h=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]],i={};h.forEach(function(j,k){i[c('EmojiFormat').codeArrayToUnicode(j)]=k+1;});f.exports={sortFunction:function j(k,l){if(!i[k]&&!i[l]){return 0;}else if(!i[k]){return 1;}else if(!i[l])return -1;return i[k]-i[l];},defaultReactions:h.map(c('EmojiFormat').codeArrayToUnicode)};}),null);
__d('getThreadTypeNameFromThreadType',['MessagingThreadType'],(function a(b,c,d,e,f,g){'use strict';function h(i){for(var j in c('MessagingThreadType'))if(c('MessagingThreadType')[j]===i)return j;return '';}f.exports=h;}),null);
__d('MessengerReactionsMenu.react',['cx','Bootloader','CurrentUser','DOM','DOMContainer.react','MercuryConfig','MercuryIDs','MercuryMessages','MercuryThreads','MessengerMessageActionsTypedLogger','MessengerReactionsContextualDialog.react','MessengerTextWithEmoticons.react','MessengerReactionsUtil','MessageReactionMutationWebGraphQLMutation','React','XAsyncRequest','getThreadTypeNameFromThreadType'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{}},this.$MessengerReactionsMenu2=function(q){!q&&this.props.onHide();}.bind(this),m;}k.prototype.componentDidMount=function(){if(c('MercuryConfig').WWWMessengerReaction)this.loadAnimation();};k.prototype.$MessengerReactionsMenu1=function(l,m){var n=c('DOM').create('span');l.loadAnimation({wrapper:n,animationData:m,renderer:'svg',loop:true,autoplay:true});return n;};k.prototype.loadAnimation=function(){var l=Date.now();c('Bootloader').loadModules(["bodymovin","MessengerReactionEmojiLove","MessengerReactionEmojiHaha","MessengerReactionEmojiWow","MessengerReactionEmojiSad","MessengerReactionEmojiAngry","MessengerReactionEmojiThumbsUp","MessengerReactionEmojiThumbsDown"],function(m){var n=c('MessengerReactionsUtil').defaultReactions,o={};for(var p=arguments.length,q=Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];for(var s=0;s<n.length;s++){var t=n[s];o[t]=this.$MessengerReactionsMenu1(m,q[s]);}this.setState({animations:o});c('Bootloader').loadModules(["MessengerRestReactionTypedLogger"],function(u){new u().setLoadedTime(Date.now()-l).log();},'MessengerReactionsMenu.react');}.bind(this),'MessengerReactionsMenu.react');};k.prototype.render=function(){var l=c('CurrentUser').getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c('React').createElement(c('MessengerReactionsContextualDialog.react'),{alignment:'center',contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu2},c('React').createElement('div',{role:'select',className:"_1z8q _fy2"},c('MessengerReactionsUtil').defaultReactions.map(function(n){return c('React').createElement('span',{className:"_1z8r"+(n===m?' '+"_5-2b":''),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu3(n);}.bind(this),role:'option',tabIndex:'0'},!this.state.animations[n]?c('React').createElement(c('MessengerTextWithEmoticons.react'),{customSize:true,renderEmoticons:true,renderEmoji:true,text:n}):c('React').createElement(c('DOMContainer.react'),null,this.state.animations[n]));}.bind(this))));};k.prototype.$MessengerReactionsMenu3=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c('CurrentUser').getID(),q=n.reactions&&n.reactions[p],r=c('MercuryMessages').get().getServerMessageID(n.message_id),s=c('MessageReactionMutationWebGraphQLMutation').getURI({action:l===q?'REMOVE_REACTION':'ADD_REACTION',message_id:r,actor_id:p,reaction:l}),t=function u(v){var w=n.other_user_fbid||n.thread_fbid,x=c('MercuryThreads').get().getThreadMetaNow(n.thread_id),y=x&&x.participants?x.participants.length:0,z=c('getThreadTypeNameFromThreadType')(x&&x.thread_type),aa=n.attachments[0],ba=new (c('MessengerMessageActionsTypedLogger'))().setAction('reaction').setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c('MercuryIDs').getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(l).setPreviousReaction(q).setGroupSize(y).setThreadType(z).setThreadid(w);if(v.errorSummary)ba=ba.setErrorText(v.errorSummary.toString());if(aa)ba=ba.setMessageType(aa.attach_type);ba.log();};new (c('XAsyncRequest'))(s).setMethod('POST').setHandler(t).send();this.props.onHide();};f.exports=k;}),null);
__d('MessengerReactionsPrompt.react',['cx','ix','Image.react','MessengerReactionsMenu.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open);}.bind(this));}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open);}.bind(this));}.bind(this),n;}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c('React').createElement('span',{className:(!this.props.isQuickAdd?"_5zvq":'')+(this.props.isQuickAdd?' '+"_yav":''),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:'button'},c('React').createElement(c('Image.react'),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu());};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c('React').createElement(c('MessengerReactionsMenu.react'),{entryPoint:'awareness_plus',message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button;}.bind(this)});};f.exports=l;}),null);
__d('MessengerReactions.react',['cx','fbt','Bootloader','CurrentUser','MercuryIDs','MercuryParticipants','MessengerEnvironment','MessengerReactionsUtil','MessengerReactionsPrompt.react','MessengerTextWithEmoticons.react','MessengerWebViewReactionsTypedLogger','TooltipData','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='ALL',n=c('CurrentUser').getID(),o=3,p=9;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.$MessengerReactions2=function(){var w=c('MessengerEnvironment').messengerui,x=this.props,y=x.isFromViewer,z=x.message,aa=x.participants,ba=z.reactions;new (c('MessengerWebViewReactionsTypedLogger'))().setEvent('open_details').setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(ba).length).log();if(w){c('Bootloader').loadModules(["messengerDialogsRe","messengerReactionsDialogReact"],function(ca,da){var ea=da.comp;ca.showDialog(function(){return c('React').createElement(ea,{isFromViewer:y,participants:aa,message:z});});},'MessengerReactions.react');}else c('Bootloader').loadModules(["ChatReactionsDialog"],function(ca){ca.show(z,aa,y);},'MessengerReactions.react');}.bind(this),s;}q.prototype.render=function(){var r=this.props,s=r.message,t=r.participants,u=r.renderQuickAdd,v=s.reactions;if((!v||!t)&&!u)return null;var w={},x=0,y=false;Object.entries(v||{}).forEach(function(da){var ea=da[0],fa=da[1];if(typeof fa==='string'){if(ea===n)y=true;if(!w[fa])w[fa]=0;w[fa]++;x++;}});var z=Object.keys(w).sort(c('MessengerReactionsUtil').sortFunction).slice(0,o).map(function(da,ea,fa){return c('React').createElement('span',{className:"_4kf5",style:{zIndex:fa.length-ea,marginLeft:ea===0?0:'-4px'},key:da},c('React').createElement(c('MessengerTextWithEmoticons.react'),{customSize:true,renderEmoticons:true,renderEmoji:true,text:da}));}),aa=x>0?c('React').createElement('span',{className:"_4kf5"+(' '+"_4kf6")+(y?' '+"_fy2":'')},x):null,ba=u&&!y?c('React').createElement('div',{className:"_aou _aov"},c('React').createElement('span',{className:"_aow"},c('React').createElement(c('MessengerReactionsPrompt.react'),{message:s,messageIsSelected:true,isQuickAdd:true}))):null,ca=c('TooltipData').propsFor(this.$MessengerReactions1());return c('React').createElement('div',babelHelpers['extends']({},ca,{className:"_4kf7 preview"}),c('React').createElement(c('ShimButton.react'),{className:"_aou",onClick:this.$MessengerReactions2},z,aa),ba);};q.prototype.$MessengerReactions1=function(){var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return '';var t=Object.keys(r),u=t.reduce(function(y,z){if(y.length>=p)return y;var aa=c('MercuryIDs').getParticipantIDFromUserID(z),ba=s.get(aa)||c('MercuryParticipants').getNow(aa),ca=ba&&ba.name;if(ca)y.push(ca);return y;},[]),v=u.length,w=u.join('\n');if(t.length>v){var x=i._("et {count} autres",[i.param('count',t.length-v)]);w+='\n'+x.toString();}return w;};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool};f.exports=q;}),null);
__d('MessengerDecorator',['cssVar','cx','BootloadedComponent.react','CurrentUser','JSResource','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryMessageActions','MercuryMessageCustomizations','MercuryTagHelper','MessageBorderType','MessageCustomizationType','MessagingFlowerBorder.react','MessagingGiftWrap.react','MessagingGiftWrapConstants','MessengerEnvironment','MessengerReactions.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function r(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];if(!t)return false;if(c('MercuryAttachment').isPhotoGroupAttachment(t))return true;return false;},k=function r(s){var t=[];s.attachments.forEach(function(u){if(u.metadata&&u.metadata.fbid)t.push(u.metadata.fbid.toString());});return t;},l=[{name:'GiftWrap',check:function r(s){var t=function v(w){return c('MercuryTagHelper').get(w,c('MessagingGiftWrapConstants').TAG_PREFIX)===c('MessagingGiftWrapConstants').VALENTINES_GIFT;},u=function v(w){return !!c('MercuryTagHelper').get(w,c('MessagingGiftWrapConstants').UNWRAPPED_TAG);};return !!(c('MercuryConfig').GiftWrapViewerGK&&s.tags&&t(s.tags)&&!u(s.tags));},render:function r(s,t){return c('React').createElement(c('MessagingGiftWrap.react'),{key:'giftwrap',onUnwrap:function u(){var v="2500ms",w=parseInt(v.substring(0,v.length-2),10);setTimeout(function(){return c('MercuryMessageActions').get().unwrap(s);},w);}});},getAdditionalClassNames:function r(){return null;}},{name:'FlowerBorder',check:function r(s){return c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(s,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS;},render:function r(s,t){if(c('MessengerEnvironment').messengerui)return c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10,key:'giftwrap:'+s.message_id});return c('React').createElement(c('MessagingFlowerBorder.react'),{key:'giftwrap:'+s.message_id});},getAdditionalClassNames:function r(){if(!c('MessengerEnvironment').messengerui)return "_337n";return null;}},{name:'Reactions',check:function r(s,t){var u=!!(s.reactions&&Object.keys(s.reactions).length>0),v=!!(!t&&j(s));return u||v;},render:function r(s,t,u){return c('React').createElement(c('MessengerReactions.react'),{isFromViewer:t,key:s.message_id+'-reactions',message:s,renderQuickAdd:j(s)&&!t,participants:u&&u.participants});},getAdditionalClassNames:function r(){return "_5z-5";}}],m=[],n=[{name:'ViewerMentioned',check:function r(s){return !!(c('MercuryConfig').MentionsReply&&s.profile_ranges&&s.profile_ranges.some(function(t){return t.id===c('CurrentUser').getID();}));},render:function r(s,t,u){var v=u?u.thread?u.thread.custom_color:u.threadCustomColor||u.customColor:undefined;return c('React').createElement(c('BootloadedComponent.react'),{key:'mention-reply:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerReplyToMention.react').__setRef('MessengerDecorator'),message:s,color:v});},getAdditionalClassNames:function r(){return "_aol";}}],o=[{name:'MontageReply',check:function r(s){if(!c('MercuryConfig').MontageThreadViewer)return false;var t=s.montage_reply_data&&s.montage_reply_data.message_id;return !!t;},render:function r(s,t){var u=s.montage_reply_data&&s.montage_reply_data.message_id,v=s.montage_reply_data&&s.montage_reply_data.reply_action;return c('React').createElement(c('BootloadedComponent.react'),{key:'montagereply:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MontageReplyDecoratorContainer.react').__setRef('MessengerDecorator'),isFromViewer:t,messageID:u,replyAction:v,replyAuthorID:s.author,threadID:s.thread_id});},getAdditionalClassNames:function r(){return null;}}],p=[{name:'ForwardImages',check:function r(s){return j(s);},render:function r(s,t){return c('React').createElement(c('BootloadedComponent.react'),{key:'forwardimages:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('MessengerEnvironment').messengerui?c('JSResource')('MessengerPhotoForwardButton.react').__setRef('MessengerDecorator'):c('JSResource')('ChatPhotoForwardButton.react').__setRef('MessengerDecorator'),attachmentIDs:k(s),isFromViewer:t});},getAdditionalClassNames:function r(){return "_ylc";}},{name:'ReactionPrompt',check:function r(s){return !j(s);},render:function r(s,t,u){return c('React').createElement(c('BootloadedComponent.react'),{key:'reactionprompt:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerReactionsPrompt.react').__setRef('MessengerDecorator'),message:s,messageIsSelected:u&&u.messageIsSelected,onShowMenu:u&&u.onShowMenu});},getAdditionalClassNames:function r(){return null;}},{name:'MessageActions',check:function r(s){return c('MessengerEnvironment').messengerui;},render:function r(s,t,u){return c('React').createElement(c('BootloadedComponent.react'),{key:'messageactions:'+s.message_id,bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('MessengerMessageActions.react').__setRef('MessengerDecorator'),message:s,isActive:u&&u.messageIsSelected,onShowMenu:u&&u.onShowMenu,includeReactions:j(s)});},getAdditionalClassNames:function r(){return null;}}],q={getBeforeDecorators:function r(){return o;},getAfterDecorators:function r(){return l;},getInnerDecorators:function r(){return p;},getAfterExternalDecorators:function r(){return m;},getInsideDecorators:function r(){return n;}};f.exports=q;}),null);
__d('MessengerHotLikePreviewEvents',['mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h={START:'start',STOP:'stop',STOP_EMOJI:'stop_emoji',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation',FINISH_EMOJI_ANIMATION:'finish_emoji_animation'};c('mixInEventEmitter')(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:'remove',finish_animation:'finish_animation',finish_emoji_animation:'finish_emoji_animation'});f.exports=h;}),null);
__d('MessengerHotLikeUtils',['EmojiLikeConstants','StickerAssetType','StickerConstants','XStickerAssetController'],(function a(b,c,d,e,f,g){'use strict';var h={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function i(j){var k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;break;}return k;},getEmojiSizeForTime:function i(j){var k=c('EmojiLikeConstants').size.SMALL;if(j<this.SizeTimes.small){k=c('EmojiLikeConstants').size.SMALL;}else if(j<this.SizeTimes.medium){k=c('EmojiLikeConstants').size.MEDIUM;}else if(j<this.SizeTimes.large)k=c('EmojiLikeConstants').size.LARGE;return k;},getMetadataForHotLike:function i(j){var k=void 0;switch(j){case c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c('EmojiLikeConstants').size.LARGE:k=64;break;case c('EmojiLikeConstants').size.MEDIUM:k=64;break;case c('EmojiLikeConstants').size.SMALL:k=32;break;}return k?{height:k,width:k}:undefined;},getPreviewURI:function i(){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getURIWithID:function i(j){return c('XStickerAssetController').getURIBuilder().setInt('sticker_id',j).setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString();},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon;}};f.exports=h;}),null);
__d('MessengerLightweightActionUtils',['MercuryAttachmentType'],(function a(b,c,d,e,f,g){'use strict';function h(k){return !!(k&&k.attach_type===c('MercuryAttachmentType').SHARE&&k.share&&k.share.target&&k.share.target.lwa_type);}function i(k){var l=k.attachments;return !!(l&&l.length===1&&h(l[0]));}function j(k){return k.attachments[0].share.title;}f.exports={isLWAMessage:i,isLWAAttachment:h,getCollapsedLWAText:j};}),null);
__d('MessengerInnerDecorators.react',['cx','MessengerDecorator','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q});}.bind(this),m;}k.prototype.render=function(){var l=c('MessengerDecorator').getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers['extends']({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null;}.bind(this)).filter(Boolean);return c('React').createElement('span',{className:"_40fu"},c('React').createElement('span',{className:"_2u_d"},l));};f.exports=k;}),null);
__d('MessengerQuickCamDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('MessengerQuickCamActions',['MessengerQuickCamDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CLOSE:null,COUNT_DOWN_TIMER:null,COUNT_DOWN_TIMER_START:null,PROCESS_RECORDING:null,REGISTER_QUICKCAM:null,REMOVE_ALL_LISTENERS:null,REQUEST_USER_MEDIA:null,RETAKE:null,SEND_PHOTO:null,SEND_VIDEO:null,SET_MEDIA:null,SHUTTER_OFF:null,STOP_VIDEO:null,TAKE_VIDEO:null,UPDATE_PROGRESS:null,UPLOAD_COMPLETE:null,UPLOAD_ERROR:null,USER_MEDIA_ERROR:null}),i={Types:h,close:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.CLOSE});},countDownTimer:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.COUNT_DOWN_TIMER});},countDownTimerStart:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.COUNT_DOWN_TIMER_START});},processRecording:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.PROCESS_RECORDING,videoBlob:k});},registerQuickCam:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.REGISTER_QUICKCAM,source:k,quickcam:l});},requestUserMedia:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.REQUEST_USER_MEDIA,viewer:k,threadID:l});},retake:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.RETAKE});},sendPhoto:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SEND_PHOTO});},sendVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SEND_VIDEO});},setMedia:function j(k,l){c('MessengerQuickCamDispatcher').dispatch({type:h.SET_MEDIA,videoSrc:k,videoStream:l});},stopVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.STOP_VIDEO});},shutterOff:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.SHUTTER_OFF});},takeVideo:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.TAKE_VIDEO});},updateProgress:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.UPDATE_PROGRESS});},uploadError:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.UPLOAD_ERROR,error:k});},uploadComplete:function j(k){c('MessengerQuickCamDispatcher').dispatch({type:h.UPLOAD_COMPLETE,data:k});},userMediaError:function j(){c('MessengerQuickCamDispatcher').dispatch({type:h.USER_MEDIA_ERROR});}};f.exports=i;}),null);
__d("XSetNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/chat\/nux_seen\/",{setting_name:{type:"String"}});}),null);
__d('MessagingShowNUX.react',['AsyncRequest','ChatConfig','React','XSetNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c('ChatConfig').get(this.props.settingName)},this.$MessagingShowNUX1=function(){if(!this.state.showNUX)return;c('ChatConfig').set(this.props.settingName,true);new (c('AsyncRequest'))(c('XSetNUXSeenController').getURIBuilder().getURI()).setData({setting_name:this.props.settingName}).send();this.setState({showNUX:false});this.props.onHidden();}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingShowNUX1,position:'left',width:'auto',shown:this.state.showNUX&&this.props.shown},this.props.children);};k.propTypes={children:j.any,contextRef:j.func.isRequired,onHidden:j.func.isRequired,settingName:j.string.isRequired,shown:j.bool.isRequired};f.exports=k;}),null);
__d('MessengerQuickCamOrigins',[],(function a(b,c,d,e,f,g){'use strict';var h={CHAT_TAB:'chat tab',MESSENGER:'messenger',getValues:function i(){return [h.CHAT_TAB,h.MESSENGER];}};f.exports=h;}),null);
__d('MessengerQuickCamButtonHTML5.react',['cx','fbt','BootloadedComponent.react','ChatConfig','JSResource','Link.react','MessagingShowNUX.react','MessengerDialog.react','MessengerQuickCamActions','MessengerQuickCamOrigins','MessengerSpinner.react','React','XUIDialog.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='seen_cam_button_nux';j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$MessengerQuickCamButtonHTML53=function(){this.setState({nuxOpen:false,nuxShown:true,dialogOpen:true});}.bind(this);this.$MessengerQuickCamButtonHTML56=function(){if(this.state.dialogOpen)this.setState({dialogOpen:false});}.bind(this);this.$MessengerQuickCamButtonHTML57=function(p){if(!p){this.$MessengerQuickCamButtonHTML56();}else c('MessengerQuickCamActions').requestUserMedia(this.props.viewer,this.props.threadID);}.bind(this);this.$MessengerQuickCamButtonHTML51=function(p){if(!this.state.nuxShown){this.setState({nuxOpen:true});return;}if(this.state.dialogOpen)return;p.stopPropagation();this.setState({dialogOpen:!this.state.dialogOpen});}.bind(this);this.state={dialogOpen:false,nuxShown:!!c('ChatConfig').get(m),nuxOpen:false};}n.prototype.render=function(){var o=this.props.textChild;return c('React').createElement(c('Link.react'),{className:c('joinClasses')(this.props.className,"_30yy"),onClick:this.$MessengerQuickCamButtonHTML51,ref:'photoButton',role:'button',title:i._("Prenez une photo avec la fonction quick cam")},!!o&&o,this.$MessengerQuickCamButtonHTML52());};n.prototype.$MessengerQuickCamButtonHTML52=function(){if(!this.state.nuxShown)return c('React').createElement(c('MessagingShowNUX.react'),{contextRef:function(){return this.refs.photoButton;}.bind(this),settingName:m,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButtonHTML53,ref:'camNUX'},i._("Envoyez des photos et des vid\u00e9os \u00e0 partir de l\u2019appareil photo de votre ordinateur."));if(!this.state.dialogOpen)return null;return this.props.location===c('MessengerQuickCamOrigins').MESSENGER?this.$MessengerQuickCamButtonHTML54():this.$MessengerQuickCamButtonHTML55();};n.prototype.$MessengerQuickCamButtonHTML54=function(){var o=window.innerWidth/3;return c('React').createElement(c('MessengerDialog.react'),{overflow:'hidden',contextRef:function(){return this.refs.photoButton;}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null)),bootloadLoader:c('JSResource')('MessengerQuickCamDialog.react').__setRef('MessengerQuickCamButtonHTML5.react'),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p);}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}));};n.prototype.$MessengerQuickCamButtonHTML55=function(){var o=window.innerWidth/3;return c('React').createElement(c('XUIDialog.react'),{overflow:'hidden',contextRef:function(){return this.refs.photoButton;}.bind(this),shown:this.state.dialogOpen,onBlur:this.$MessengerQuickCamButtonHTML56,hideOnEscape:true,onToggle:this.$MessengerQuickCamButtonHTML57,width:400>o?400:o},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{padding:'30px',textAlign:'center'}},c('React').createElement(c('XUISpinner.react'),null)),bootloadLoader:c('JSResource')('MessengerQuickCamDialog.react').__setRef('MessengerQuickCamButtonHTML5.react'),location:this.props.location,onShown:function(p){this.$MessengerQuickCamButtonHTML57(true);if(this.props.onDialogShown)this.props.onDialogShown(p);}.bind(this),onHidden:this.$MessengerQuickCamButtonHTML56,onEscKeyDown:this.$MessengerQuickCamButtonHTML56,shown:this.state.dialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}));};n.propTypes={className:l.string.isRequired,location:l.oneOf(c('MessengerQuickCamOrigins').getValues()).isRequired,textChild:l.node,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=n;}),null);
__d('MessengerContextualDialog.react',['cx','AccessibleLayer','ContextualLayerAutoFlipHorizontal','ContextualLayerUpdateOnScroll','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i=12,j=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({addedBehaviors:[c('ContextualLayerAutoFlipHorizontal'),c('ContextualLayerUpdateOnScroll'),c('LayerHideOnEscape'),c('AccessibleLayer')],displayName:'MessengerContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:i,length:16}}}));f.exports=j;}),null);
__d('MessengerHotLikeOutlineSVG.react',['cssVar','fbt','CurrentUser','React','MercuryShareAttachmentRenderLocations','uniqueID','UserAgent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='transparent',n=i._("Pouce lev\u00e9");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c('uniqueID')()},q;}o.prototype.render=function(){var p=this.props.color||(c('CurrentUser').isWorkUser()?"#1479fb":"#0084ff"),q=c('UserAgent').isBrowser('Safari')?'0 0 40.16 42.24':'-1 -1 40.16 42.24',r={height:this.props.height||'85%'};if(this.props.location!==c('MercuryShareAttachmentRenderLocations').CHAT&&this.props.location!==c('MercuryShareAttachmentRenderLocations').PAGES_INBOX)r.width='66%';return c('React').createElement('svg',{'aria-labelledby':this.state.titleId,version:'1.1',viewBox:q,preserveAspectRatio:'xMinYMax meet',style:r},c('React').createElement('title',{id:this.state.titleId},n),c('React').createElement('path',{d:'M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z',transform:'translate(-898.5 -1563.26)',fill:m,fillRule:'evenodd',stroke:p,strokeLinecap:'round',strokeWidth:'5%'}));};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o;}),null);
__d('MessengerHotLikeButton.react',['cx','fbt','EmojiLikeConstants','Image.react','ImmutableObject','Keys','KeyStatus','Link.react','MercuryMessageObject','MercuryTriodeSourceUtil','MessengerEnvironment','MessengerHotLikePreviewEvents','MessengerHotLikeOutlineSVG.react','MessengerHotLikeUtils','MessengerSupportedEmojiUtils','React','StickerConstants','clearTimeout','ifRequired','joinClasses','setIntervalAcrossTransitions','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryMessageObject').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation();}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10();}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12();}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').POP,this.props.threadID);}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14();}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c('KeyStatus').getKeyDownCode()===c('Keys').RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u){u(this.props.customLike,c('MessengerHotLikeUtils').getEmojiSizeForTime(1));}else this.props.sendSticker(c('MessengerHotLikeUtils').getStickerIDForTime(1));}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike){this.props.sendCustomLike(this.props.customLike,q,c('EmojiLikeConstants').source.HOT_LIKE);}else this.props.sendSticker(p);}.bind(this));};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove();};n.prototype.render=function(){var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c('MessengerSupportedEmojiUtils').getNewEmojiData(q,c('EmojiLikeConstants').size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background='none';o=c('React').createElement(c('Image.react'),{src:r&&r.url,style:{padding:s==16?0:3,display:'block',height:s,width:s}});}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c('React').createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize});}else if(this.props.customColor)o=c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{color:this.props.customColor,location:this.props.location});var u=i._("Envoyer une mention J\u2019aime");return c('React').createElement(c('Link.react'),{'aria-label':u,className:c('joinClasses')(this.props.customColor||this.props.CustomRenderer?"_5j_u":'',this.props.className),disabled:this.props.disabled,href:'#',onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault();},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:'button',style:p,title:u},o);};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').START,this.$MessengerHotLikeButton13(),this.props.threadID);};n.prototype.$MessengerHotLikeButton12=function(){if(!this.props.threadID)return;if(!c('MessengerEnvironment').messengerui){c('ifRequired')('MessengerHotLikePreview.react',function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c('setIntervalAcrossTransitions')(function(){c('ifRequired')('MessengerHotLikePreview.react',function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null;}c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this));}.bind(this),100);}.bind(this));}else c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);};n.prototype.$MessengerHotLikeButton13=function(){var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body='';return new (c('ImmutableObject'))(p);};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c('setTimeoutAcrossTransitions')(this.$MessengerHotLikeButton14,c('MessengerHotLikeUtils').SizeTimes.large);};n.prototype.$MessengerHotLikeButton11=function(){c('clearTimeout')(this.$MessengerHotLikeButton2);};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n;}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1193572474099061";};j.getQueryID=function(){"use strict";return "1132183563559860";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messenger\/commerce\/bots\/menu\/",{page_id:{type:"String",required:true}});}),null);
__d('MessengerBotMenuDataFetcher',['AsyncRequest','Cache','MessengerBotComposerWebGraphQLQuery','MNCommercePageSetting','XMessengerBotsMenuController'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerBotMenuDataFetcher1=new (c('Cache'))();this.$MessengerBotMenuDataFetcher2=new (c('Cache'))();}h.prototype.getMenuItems=function(i,j,k){if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return;}var l=c('XMessengerBotsMenuController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n);}.bind(this)).setErrorHandler(function(m){k();}).send();};h.prototype.getHasMenu=function(i,j,k){if(!this.$MessengerBotMenuDataFetcher2.has(i)){var l=c('MessengerBotComposerWebGraphQLQuery').getURI({node_id:i});new (c('AsyncRequest'))().setURI(l).setHandler(function(n){var o=n.payload.data.node,p=o&&o.commerce_page_settings||[],q=p.indexOf(c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED)!==-1;this.$MessengerBotMenuDataFetcher2.set(i,q);j(q);}.bind(this)).setErrorHandler(function(n){this.$MessengerBotMenuDataFetcher2.set(i,false);k();}.bind(this)).send();}var m=this.$MessengerBotMenuDataFetcher2.get(i);m=m?m:false;j(m);return m;};f.exports=new h();}),null);
__d('MessengerBotMenuButton.react',['BootloadOnRender.react','ChatFlyoutPlaceholder.react','JSResource','LazyComponent.react','Link.react','MessengerBotMenuDataFetcher','MessengerBotsWebTypedLogger','MessengerContextualDialog.react','MessengerEnvironment','MNBotsLoggerEvents','React','XUIContextualDialog.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=302,l=280;h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerBotMenuButton1=false,this.state={flyoutOpen:false,isLoading:false,menuItems:null},this.$MessengerBotMenuButton2=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerBotMenuButton6=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();}.bind(this),this.$MessengerBotMenuButton4=function(){this.$MessengerBotMenuButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerBotMenuButton3=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$MessengerBotMenuButton1)return;if(this.state.menuItems===null){this.setState({isLoading:true});this.$MessengerBotMenuButton7();}this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),o;}m.prototype.componentWillUnmount=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();};m.prototype.render=function(){new (c('MessengerBotsWebTypedLogger'))().setEvent(c('MNBotsLoggerEvents').BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log();return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this.$MessengerBotMenuButton3,onMouseDown:this.$MessengerBotMenuButton4,role:'button',ref:'link'}),this.$MessengerBotMenuButton5());};m.prototype.$MessengerBotMenuButton5=function(){if(!this.state.flyoutOpen)return null;var n=c('MessengerEnvironment').messengerui,o=n?k:l,p=n?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');return c('React').createElement(p,babelHelpers['extends']({alignment:this.props.flyoutAlignment,width:o,position:'above',contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this.$MessengerBotMenuButton6,onBlur:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen},this.props,{key:'contextualDialog'}),c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onEscKeyDown:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$MessengerBotMenuButton2}),loader:c('JSResource')('MessengerBotMenuDialog.react').__setRef('MessengerBotMenuButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));};m.prototype.$MessengerBotMenuButton7=function(){c('MessengerBotMenuDataFetcher').getMenuItems(this.props.pageID,function(n){this.setState({menuItems:n,isLoading:false});}.bind(this),function(){this.setState({menuItems:[],isLoading:false});}.bind(this));};m.propTypes={className:j.string,flyoutAlignment:j.string.isRequired,threadID:j.string.isRequired,pageID:j.string.isRequired};f.exports=m;}),null);
__d('MessengerVideoAutoplayActions',['MessengerFluxReduceDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h='messenger_video',i=c('keyMirror')({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c('MessengerFluxReduceDispatcher').dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o});},updateStore:function k(l,m){c('MessengerFluxReduceDispatcher').dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m});},deleteThread:function k(l){c('MessengerFluxReduceDispatcher').dispatch({type:i.DESTROY,namespace:h,threadID:l});},deleteAllThreads:function k(){c('MessengerFluxReduceDispatcher').dispatch({type:i.DESTROY_ALL,namespace:h});}};f.exports=j;}),null);
__d('MessengerVideoAutoplayStore',['FluxReduceStore','immutable','MessengerVideoAutoplayActions','MessengerFluxReduceDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l=c('MessengerVideoAutoplayActions').Types;h=babelHelpers.inherits(m,c('immutable').Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments);}j=babelHelpers.inherits(n,c('FluxReduceStore'));k=j&&j.prototype;n.prototype.getInitialState=function(){return c('immutable').Map();};n.prototype.reduce=function(o,p){if(p.namespace!==c('MessengerVideoAutoplayActions').Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear();}return o;};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o['delete'](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}));};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o['delete'](p);};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t){return [v,false];}else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return [v,w];}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u});};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){var s=o.getIn([p,'messageIDs']);if(!s||!q||!r)return o;if(!o.getIn([p,'currentVideoMessageID'])){return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);}else{var t=o.getIn([p,'videoVisibilityMap']),u=o.getIn([p,'lastVideoMessageID']),v=o.getIn([p,'currentVideoMessageID']);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o;}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,'currentVideoMessageID'],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom;};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q);};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,'videoVisibilityMap']);};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,'messageIDs']);};n.prototype.isVisible=function(o,p){return !!this.getState().getIn([o,'videoVisibilityMap',p]);};function n(){j.apply(this,arguments);}f.exports=new n(c('MessengerFluxReduceDispatcher'));}),null);
__d('MNPlatformAttributionTags',[],(function a(b,c,d,e,f,g){f.exports={ATTRIBUTION_TAGS_PREFIX:'bnp:trigger:',MESSENGER_WEB:'messenger_web',MESSENGER_WEB_SEARCH:'messenger_web_search',M_DOT_ME:'m_dot_me'};}),null);
__d('MessengerStore',['MessengerDispatcher','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerStore1=c('MessengerDispatcher').register(this.__onDispatch.bind(this));}h.prototype.getDispatchToken=function(){return this.$MessengerStore1;};h.prototype.emitChange=function(){this.emit('change');};h.prototype.destroy=function(){c('MessengerDispatcher').unregister(this.$MessengerStore1);};c('mixInEventEmitter')(h,{change:true});f.exports=h;}),null);
__d('MessengerAttributionTagsStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};}j.prototype.getState=function(){'use strict';return this.$MessengerAttributionTagsStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=k.messagingTags;this.$MessengerAttributionTagsStore1.threadID=k.threadID;this.emitChange();break;case c('MessengerActions').Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break;}};f.exports=new j();}),null);
__d('MNPlatformTagsDataManager',['MessagingSourceEnum','MessengerActions','MessengerAttributionTagsStore','MNPlatformAttributionTags'],(function a(b,c,d,e,f,g){'use strict';f.exports={getTags:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=null;switch(i){case c('MessagingSourceEnum').PAGES_MESSAGE_SHORTLINK:j=c('MNPlatformAttributionTags').M_DOT_ME;break;case c('MessagingSourceEnum').MESSENGER_WEB:j=c('MNPlatformAttributionTags').MESSENGER_WEB;break;case c('MessagingSourceEnum').MESSENGER_WEB_SEARCH:j=c('MNPlatformAttributionTags').MESSENGER_WEB_SEARCH;break;default:j='';break;}if(j!=='')j=c('MNPlatformAttributionTags').ATTRIBUTION_TAGS_PREFIX+j;return [j];},updateThreadTabAfterSelectThread:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=arguments.length<=1||arguments[1]===undefined?null:arguments[1],k=this.getTags(i);c('MessengerActions').changeThreadTag(k,j);},hasThreadTags:function h(i){var j=c('MessengerAttributionTagsStore').getState();return !!(j.messagingTags&&i&&j.threadID&&j.threadID.toString()===i);},getThreadTags:function h(){var i=c('MessengerAttributionTagsStore').getState();return i.messagingTags;}};}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback\/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}});}),null);
__d('getPageIDFromThreadID',['FBID','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MercuryIDs').getUserIDFromThreadID(i);if(!j||c('FBID').isUser(j))return null;return j;}f.exports=h;}),null);
__d('MNCommercePostbackCTADataManager',['AsyncRequest','BanzaiODS','CurrentUser','getPageIDFromThreadID','MercuryMessageActions','MercuryMessageObject','MercurySourceType','MNPlatformTagsDataManager','XMNCommercePostbackCTAController'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryMessageActions').get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c('XMNCommercePostbackCTAController').getURIBuilder().setString('cta_id',j).setString('ref',l).setString('message_id',m).getURI();if(k!==null){new (c('AsyncRequest'))().setURI(n).setMethod('post').setErrorHandler(k).send();}else new (c('AsyncRequest'))().setURI(n).setMethod('post').send();};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q);};i.prototype.sendConfirmationText=function(j,k,l){if(!k){c('BanzaiODS').bumpEntityKey('messenger_commerce','confirm_message_failed.empty_threadID');}else{var m=new (c('MercuryMessageObject'))(c('CurrentUser').getID()),n=[],o=c('getPageIDFromThreadID')(k);if(c('MNPlatformTagsDataManager').hasThreadTags(o))n=c('MNPlatformTagsDataManager').getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c('MercurySourceType').TITAN_WEB,k,l,n));if(n&&n.length>0)c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread();}};function i(){}f.exports=new i();}),null);
__d('messengerCustomColorUtils',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j=j||{};j.backgroundColor=i;return j;}f.exports={customBubbleStyle:h};}),null);
__d('AutoFocusableLink.react',['Link.react','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Link.react'));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c('ReactDOM').findDOMNode(this).focus();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('CustomColorHighlighting.react',['cssVar','csx','cx','React','UserAgent','guid','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n="._fy2",o="._43by",p="._mh6",q=c('UserAgent').isEngine('Gecko')?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c('UserAgent').isEngine('Gecko')?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c('React').PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:'cch_'+c('guid')()};}y.prototype.componentWillMount=function(){this.$CustomColorHighlighting1();};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag);};y.prototype.componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor){this.$CustomColorHighlighting2();}else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor);};y.prototype.render=function(){return c('React').createElement('span',{className:c('joinClasses')("_mh6",this.props.className),id:this.state.id},this.props.children);};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement('style');z.appendChild(document.createTextNode(''));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor);}.bind(this));};y.prototype.$CustomColorHighlighting4=function(z,aa,ba){if(z.insertRule){z.insertRule(aa+'{'+ba+'}',0);}else if(z.addRule)z.addRule(aa,ba,0);};y.prototype.$CustomColorHighlighting5=function(z){if('removeRule' in z){z.removeRule(0);}else if('deleteRule' in z)z.deleteRule(0);};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet);}};y.prototype.$CustomColorHighlighting6=function(z){var aa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),ba=parseInt(aa[1],16),ca=parseInt(aa[2],16),da=parseInt(aa[3],16);return 'rgba('+ba+','+ca+','+da+',0.2)';};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var aa=z||this.props.customColor;if(aa){var ba=this.$CustomColorHighlighting6(aa),ca='background: '+ba;this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+u,ca);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+s,'color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+t,'background-color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+v+' '+w,'background-color: '+x);}};y.propTypes={className:m.string,customColor:m.string};f.exports=y;}),null);
__d('EmojiOnlyMessage.react',['cx','EmojiImageURL','EmojiLikeConstants','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;if(p.emojiKey){var q=c('EmojiImageURL').getMessengerURL(p.emojiKey,c('EmojiLikeConstants').sizeMap.dp32);return c('React').createElement(c('Image.react'),{alt:p.text,className:m,key:n,src:q});}else return c('React').createElement('span',{key:n},p.text);});return c('React').createElement('div',{tabIndex:'0'},o);};function l(){i.apply(this,arguments);}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l;}),null);
__d('MercuryBootloadOnInteraction.react',['BootloadOnRender.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$MercuryBootloadOnInteraction1=function(l){this.setState({hadUserInteraction:true,interactionType:l.type});}.bind(this);this.$MercuryBootloadOnInteraction2=function(l){this.setState({interactionType:undefined});}.bind(this);this.state={hadUserInteraction:false};}j.prototype.render=function(){if(!this.state.hadUserInteraction)return c('React').cloneElement(this.props.placeholder,{onFocus:this.$MercuryBootloadOnInteraction1,onMouseOver:this.$MercuryBootloadOnInteraction1,onClick:this.$MercuryBootloadOnInteraction1,onBlur:this.$MercuryBootloadOnInteraction2});var k=this.props,l=k.loader,m=k.component,n=k.placeholder,o={};switch(this.state.interactionType){case 'focus':o.autoFocus=true;break;case 'click':o.clicked=true;break;}m=c('React').cloneElement(m,o);n=c('React').cloneElement(n,o);return c('React').createElement(c('BootloadOnRender.react'),{placeholder:n,loader:l,component:m});};f.exports=j;}),null);
__d('MessageRequestUtils',['MessagingTag'],(function a(b,c,d,e,f,g){'use strict';var h={isMessageRequest:function i(j){return (j.folder===c('MessagingTag').PENDING||j.folder===c('MessagingTag').OTHER)&&j.can_reply;},isFiltered:function i(j){return j.folder===c('MessagingTag').OTHER;}};f.exports=h;}),null);
__d('MessengerMentionSource',[],(function a(b,c,d,e,f,g){'use strict';var h={REPLY:'reply',ATSIGN:'@',TYPEAHEAD:'typeahead'};f.exports=h;}),null);
__d('MoveToWorkUtils',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(){return c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser();}f.exports={isViewerEligible:h};}),null);
__d('applyMessengerEmoticonToContentBlock',['CharacterMetadata','EmoticonEmojiList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m,n){if(!c('EmoticonEmojiList').names[m])return l;var o=k.createEntity('EMOTICON','IMMUTABLE',{type:c('EmoticonEmojiList').names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c('CharacterMetadata').applyEntity(t,p)),r.slice(n+s))});}f.exports=j;}),null);
__d('getTextAfterNearestEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j);}f.exports=h;}),null);
__d('applyMessengerEmoticonToContentState',['EmoticonEmojiList','applyMessengerEmoticonToContentBlock','getTextAfterNearestEntity'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c('getTextAfterNearestEntity')(m,l),o=c('EmoticonEmojiList').regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c('applyMessengerEmoticonToContentBlock')(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})});}f.exports=h;}),null);
__d('MercuryMessageGroup',['MercuryActionType','MercuryAttachmentType','MercuryShareAttachmentRenderLocations','MercuryThreadlistConstants','MessengerLightweightActionUtils','enumerate'],(function a(b,c,d,e,f,g){'use strict';var h={calculateMessageGroups:function k(l,m){var n=[],o=null,p={value:null},q=c('enumerate')(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o);}o.push(r.value);p=r;}return n;},canAppendMessageToLastGroup:function k(l,m,n){var o=c('MercuryThreadlistConstants').GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true;}};function i(k,l){var m=k.has_attachment;if(m&&(l===c('MercuryShareAttachmentRenderLocations').MESSENGER||l===c('MercuryShareAttachmentRenderLocations').CHAT))m=j(k);return !!(c('MessengerLightweightActionUtils').isLWAMessage(k)||k.action_type==c('MercuryActionType').LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c('MercuryThreadlistConstants').MAX_CHARS_BEFORE_BREAK);}function j(k){var l=k.attachments[0];return !l||l.attach_type===c('MercuryAttachmentType').STICKER||l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;}f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabActionKeys',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false});}),null);
__d('PagesMessagingMercuryChatTabActions',['PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={requestGreetingConfig:function i(j){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG,threadID:j});},notifyGreetingConfigReceived:function i(j,k){c('PagesMessagingMercuryChatTabDispatcher').dispatch({actionType:c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k});}};f.exports=h;}),null);
__d('PagesMessagingMercuryChatTabState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('immutable').Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pagesMessengerNullStateGK:false,pageResponsiveness:null,coverData:null,connectionContext:null,pagesMessengerNullStateV2:false,pageOnlineMessage:null}));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/mercury\/greeting\/",{});}),null);
__d('PagesMessagingMercuryChatTabStore',['invariant','PagesMessagingMercuryChatTabActionKeys','PagesMessagingMercuryChatTabActions','AsyncRequest','PagesMessagingMercuryChatTabDispatcher','FluxStore','Map','MercuryIDs','PagesMessagingMercuryChatTabState','XMercuryChatTabPagesNullStateConfigController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesMessagingMercuryChatTabDispatcher'));this.$PagesMessagingMercuryChatTabStore1=new (c('Map'))();}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new (c('PagesMessagingMercuryChatTabState'))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m;};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c('PagesMessagingMercuryChatTabActionKeys').REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c('PagesMessagingMercuryChatTabActionKeys').NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break;}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c('XMercuryChatTabPagesNullStateConfigController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({page_id:c('MercuryIDs').getUserIDFromThreadID(l)}).setHandler(function(n){return c('PagesMessagingMercuryChatTabActions').notifyGreetingConfigReceived(l,n.payload);}).send();};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange();};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){return m.set('pagesGreetingShouldShow',l.pagesGreetingShouldShow).set('pagesGreetingContent',l.pagesGreetingContent).set('pagesMessengerNullStateGK',l.pagesMessengerNullStateGK).set('pageResponsiveness',l.pageResponsiveness).set('coverData',l.coverData).set('connectionContext',l.connectionContext).set('pagesMessengerNullStateV2',l.pagesMessengerNullStateV2).set('pageOnlineMessage',l.pageOnlineMessage);};f.exports=new k();}),null);
__d('PagesMessageListGreeting.react',['cx','FluxContainer','PagesMessagingMercuryChatTabActions','PagesMessagingMercuryChatTabStore','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.getStores=function(){return [c('PagesMessagingMercuryChatTabStore')];};k.calculateState=function(l,m){if(m.messageCount>0)return {shouldShowGreeting:false};var n=c('PagesMessagingMercuryChatTabStore').getStateByThread(m.threadID);return {greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow};};k.prototype.componentDidMount=function(){c('PagesMessagingMercuryChatTabActions').requestGreetingConfig(this.props.threadID);};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c('React').createElement('div',{className:"_4fsh _3-8z"},this.state.greetingContent);};function k(){i.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d("messengerDomIDsRe",["uniqueID"],(function a(b,c,d,e,f,g){'use strict';var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h;}),null);
__d('MessageList.react',['cx','immutable','ImmutableObject','MercuryActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageGroup','MessagingGenericAdminTextType','MessengerAdminGroupUtils','messengerDomIDsRe','MessengerLightweightActionUtils','PagesMessageListGreeting.react','React','ReactDOM','MercuryShareAttachmentRenderLocations','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDomIDsRe').ids,l=c('React').PropTypes,m=1000*60*60,n=function v(w){var x,y,z,aa=(x=w)!=null?(x=x.log_message_data)!=null?x.message_type:x:x;switch(aa){case c('MessagingGenericAdminTextType').GROUP_POLL:return (y=w)!=null?(y=y.log_message_data)!=null?(y=y.untypedData)!=null?y.question_id:y:y:y;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:return (z=w)!=null?(z=z.log_message_data)!=null?(z=z.untypedData)!=null?z.game_id:z:z:z;default:return null;}},o=function v(w){if(c('MessengerLightweightActionUtils').isLWAMessage(w))return 'lwa';return null;};i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;function p(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.state={activeMessageID:null,messageGroups:c('MercuryMessageGroup').calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(aa){this.setState(function(ba){return {activeMessageID:ba.activeMessageID===aa?null:ba.activeMessageID};});}.bind(this),this.$MessageList5=function(aa){this.setState({activeMessageID:aa});}.bind(this),w;}p.prototype.componentWillReceiveProps=function(v){if(v.messages!==this.props.messages)this.setState({messageGroups:c('MercuryMessageGroup').calculateMessageGroups(v.messages,v.location)});};p.prototype.render=function(){var v=this.props,w=v.DateBreak,x=v.location,y=v.MessageGroup,z=v.CollapsedLogMessageGroup,aa=[],ba=[],ca=void 0,da=this.props.thread&&this.props.thread.custom_color,ea=da?{backgroundColor:da}:null,fa=this.state.activeMessageID,ga=this.state.messageGroups,ha=ga.length,ia=this.props.readReceipts,ja=ia.last(),ka=ja?ja.watermark:0,la=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),ma=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread),na={};for(var oa=this.props.messages.size-1;oa>=0;oa--){var pa=this.props.messages.get(oa),qa=n(pa)||o(pa);if(qa&&!na[qa])na[qa]=pa.message_id;}for(var ra=0;ra<ha;ra++){var sa=ra>0?ga[ra-1]:null,ta=sa&&sa.length>0?sa[sa.length-1]:null,ua=ga[ra],va=ua[0],wa=ua[ua.length-1],xa=false;if(!ta||va.timestamp-ta.timestamp>m){xa=true;var ya=c('React').createElement(w,{date:new Date(va.timestamp),key:'db:'+va.message_id,ref:'db:'+va.message_id});if(ba.length===0)aa.push(ya);}if(c('MessengerLightweightActionUtils').isLWAMessage(va))if(na[o(va)]!==va.message_id){var za=this.$MessageList1(va,na);aa.push(za);continue;}if(va.action_type==c('MercuryActionType').LOG_MESSAGE){var ab,bb=(ab=va)!=null?(ab=ab.log_message_data)!=null?ab.message_type:ab:ab,cb=bb===c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE,db=bb===c('MessagingGenericAdminTextType').GROUP_POLL;if((x===c('MercuryShareAttachmentRenderLocations').CHAT||x===c('MercuryShareAttachmentRenderLocations').MESSENGER)&&(va.log_message_type===c('MercuryLogMessageType').VIDEO_CALL||va.log_message_type===c('MercuryLogMessageType').PHONE_CALL)){var eb=this.$MessageList2(va,la,ga,ha,ra,ia,ka,wa);aa.push(eb);}else{var fb=this.$MessageList3(va,na);ca=va.message_id;if(ma&&!cb&&!db){ba.push(fb);}else{if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}aa.push(fb);}}continue;}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}ua=c('immutable').List(ua);var gb=r(ga,ha,ra),hb=!t(ia,ua,gb),ib=s(ka,wa),jb=u(this.props.deliveryTimestamp,wa);aa.push(c('React').createElement(y,{activeMessageID:q(fa,ua),author:ua.first().author,deliveryTimestamp:jb,hasDateBreak:xa,isCanonical:this.props.isCanonical,isFromViewer:la===va.author,isPageMessage:this.props.isPageMessage,key:'mg:'+va.message_id,lastReadTimestamp:ib,maxBubbleWidth:this.props.maxBubbleWidth,messages:ua,nextTimestamp:gb,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,pageID:this.props.isPageMessage?this.props.viewer:null,readReceipts:hb?ia:c('immutable').OrderedMap(),ref:'mg:'+va.message_id,thread:this.props.thread,threadID:this.props.threadID}));}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}var kb=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,lb=null;if(x===c('MercuryShareAttachmentRenderLocations').MESSENGER&&kb&&this.props.isPageMessage)lb=c('React').createElement(c('PagesMessageListGreeting.react'),{messageCount:ba.length+ha,threadID:kb});return c('React').createElement('div',{id:x===c('MercuryShareAttachmentRenderLocations').MESSENGER?k.CONVERSATION:null},lb,aa);};p.prototype.getMessageElement=function(v,w){if(w){var x=this.refs['db:'+v];if(x)return c('ReactDOM').findDOMNode(x);}var y=this.state.messageGroups.find(function(ba){return ba.some(function(ca){return ca.message_id===v;});});if(!y)return null;var z=y[0].message_id,aa=this.refs['mg:'+z];if(!aa)return null;if(w&&z===v)return c('ReactDOM').findDOMNode(aa);return aa.getMessageElement(v);};p.prototype.$MessageList2=function(v,w,x,y,z,aa,ba,ca){var da=this.props.MessageGroup,ea={attach_type:'share',share:{style_list:['rtc_call_log','fallback'],log_message_body:v.log_message_body,log_message_data:v.log_message_data,log_message_type:v.log_message_type,timestamp:v.timestamp}},fa=c('ImmutableObject').setProperty(v,'attachments',[ea]);fa=c('ImmutableObject').setProperty(fa,'body','');var ga=c('immutable').List([fa]),ha=r(x,y,z),ia=!t(aa,ga,ha),ja=s(ba,ca),ka=u(this.props.deliveryTimestamp,ca);return c('React').createElement(da,{author:ga.first().author,deliveryTimestamp:ka,isFromViewer:w===v.author,key:v.message_id,lastReadTimestamp:ja,maxBubbleWidth:this.props.maxBubbleWidth,messages:ga,nextTimestamp:ha,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:ia?aa:c('immutable').OrderedMap(),thread:this.props.thread,threadID:this.props.threadID});};p.prototype.$MessageList3=function(v,w){var x=this.props.LogMessage,y=w[n(v)];if(v.log_message_type!==c('MercuryLogMessageType').SERVER_ERROR)return c('React').createElement(x,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:y===v.message_id});return null;};p.prototype.$MessageList1=function(v,w){var x=w[o(v)],y=this.props.LogMessage;return c('React').createElement(y,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:x===v.message_id});};p.propTypes={CollapsedLogMessageGroup:l.func.isRequired,DateBreak:l.func.isRequired,deliveryTimestamp:l.number.isRequired,isCanonical:l.bool,isPageMessage:l.bool,location:l.string.isRequired,LogMessage:l.func.isRequired,loadMoreMessages:l.func,MessageGroup:l.func.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,readReceipts:l.instanceOf(c('immutable').OrderedMap).isRequired,viewer:l.string.isRequired,thread:l.object,threadID:l.string};function q(v,w){return w.find(function(x){return x.message_id===v;})?v:null;}function r(v,w,x){return x<w-1?v[x+1][0].timestamp:Infinity;}function s(v,w){return w.timestamp>v?v:Infinity;}function t(v,w,x){return w.isEmpty()||v.last()<w.first().timestamp||v.first()>=x;}function u(v,w){return w.timestamp>v?v:Infinity;}f.exports=p;}),null);
__d('MessengerEmojiSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('MessengerSupportedEmojiUtils').getUrl(o,c('EmojiLikeConstants').size.SMALL);p=p?p:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+p+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerEmoticonSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','EmoticonEmojiList','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('EmoticonEmojiList').emote2emojis[o],q=c('MessengerSupportedEmojiUtils').getUrl(p,c('EmojiLikeConstants').size.XSMALL);q=q?q:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+q+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerMentionsEntityDecorator.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:"_fy2"},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('convertMIGColorToFIGColor',['cssVar'],(function a(b,c,d,e,f,g,h){'use strict';var i={'#0077e5':"#4080ff",'#44bec7':"#54C7EC",'#ffc300':'#f5c33b','#fa3c4c':"#F35369",'#d696bb':'#d696bb','#6699cc':"#7596c8",'#13cf13':"#42b72a",'#ff7e29':"#F7923B",'#e68585':'#e68585','#7646ff':"#8C72CB",'#20cef5':"#54C7EC",'#67b868':"#A3CE71",'#d4a88c':'#cfa588','#ff5ca1':"#EC7EBD",'#a695c7':"#AF9CDA"};function j(k){return k&&i[k]||k||'';}f.exports=j;}),null);
__d('createMessengerMentionDraftEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.createEntity('MENTION','SEGMENTED',{id:j.getUniqueID()});return k.getLastCreatedEntityKey();}f.exports=h;}),null);
__d('getProfileRangesForContentState',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=c('emptyFunction').thatReturnsTrue;function i(j){var k=[],l=0;j.getBlockMap().forEach(function(m){var n=0,o=m.getText();m.findEntityRanges(h,function(p,q){var r=m.getEntityAt(p);if(r){var s=j.getEntity(r);if(s.getType()==='EMOTICON'){n+=s.getData().originalEmoticon.length-1;}else if(s.getType()==='EMOJI'){var t=s.getData().type,u=c('EmojiFormat').codeStringToCodeArray(t),v=String.fromCodePoint.apply(String,u);n+=v.length-1;}else if(s.getType()==='MENTION'){var w=s.getData().id,x=p+n+l;if(/^\d+$/.test(w))k.push({offset:x,length:q-p,id:w});}}});l+=o.length+n+1;});return k;}f.exports=i;}),null);
__d('getVisibleValueForContentStateWithMessengerEmoji',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getBlockMap().map(function(k){var l=k.getText(),m='';k.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=k.getEntityAt(n);if(!p){m+=l.slice(n,o);}else{var q=i.getEntity(p);if(q.getType()==='EMOTICON'){m+=q.getData().originalEmoticon;}else if(q.getType()==='EMOJI'){var r=q.getData().type,s=c('EmojiFormat').codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s);}else m+=l.slice(n,o);}});return m;});return j.join('\n');}f.exports=h;}),null);
__d('insertMessengerEmojiIntoContentState',['DraftModifier','EmojiFormat'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=j.createEntity('EMOJI','IMMUTABLE',{type:i}),n=m.getLastCreatedEntityKey();return c('DraftModifier').insertText(j,k,c('EmojiFormat').codeStringToUnicode(i),l,n);}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoji',['EditorState','MessengerSupportedEmojiUtils','insertMessengerEmojiIntoContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c('MessengerSupportedEmojiUtils').getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c('insertMessengerEmojiIntoContentState')(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c('EditorState').push(i,m,'insert-characters');}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c('applyMessengerEmoticonToContentState')(m,l);if(n===m)return j;var o=c('DraftModifier').insertText(n,n.getSelectionAfter(),k);return c('EditorState').push(j,o,'insert-characters');}f.exports=i;}),null);
__d('handleSoftNewlineForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c('applyMessengerEmoticonToContentState')(j,k),m=c('DraftModifier').splitBlock(l,j===l?k:l.getSelectionAfter());return c('EditorState').push(i,m,'split-block');}f.exports=h;}),null);
__d('MercuryCanonicalGroupThreadManager',['Bootloader','KeyedCallbackManager','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySingletonProvider','MercuryThreads','MercuryServerDispatcher','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercuryCanonicalGroupThreadManager1=j;this.$MercuryCanonicalGroupThreadManager2=new (c('KeyedCallbackManager'))();this.$MercuryCanonicalGroupThreadManager3=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager6=c('MercuryThreads').getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager4={};this.$MercuryCanonicalGroupThreadManager8();this.$MercuryCanonicalGroupThreadManager9();this.$MercuryCanonicalGroupThreadManager7={};}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.getCanonicalGroupThreadIDForParticipants=function(j,k){j=this.$MercuryCanonicalGroupThreadManager10(j);var l=this.$MercuryCanonicalGroupThreadManager11(j),m=this.$MercuryCanonicalGroupThreadManager2.executeOrEnqueue(l,k);this.$MercuryCanonicalGroupThreadManager12(j);return m;};h.prototype.unsubscribe=function(j){if(j)this.$MercuryCanonicalGroupThreadManager2.unsubscribe(j);};h.prototype.$MercuryCanonicalGroupThreadManager11=function(j){return j.sort().join(',');};h.prototype.$MercuryCanonicalGroupThreadManager13=function(j,k){var l=c('MercuryIDs').getThreadIDFromThreadFBID(k);this.$MercuryCanonicalGroupThreadManager2.setResource(j,l);this.$MercuryCanonicalGroupThreadManager4[l]=j;};h.prototype.$MercuryCanonicalGroupThreadManager12=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(j),l={canonical_group_key:k,participants:j};c('MercuryServerDispatcher').trySend('/ajax/mercury/search_canonical_groups.php',l,null,this.$MercuryCanonicalGroupThreadManager1);};h.prototype.$MercuryCanonicalGroupThreadManager8=function(){c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_canonical_groups.php':{request_user_id:this.$MercuryCanonicalGroupThreadManager1,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(j){this.handleUpdate(j);}.bind(this)}});};h.prototype.$MercuryCanonicalGroupThreadManager10=function(j){if(j.indexOf(this.$MercuryCanonicalGroupThreadManager1)===-1)j.push(this.$MercuryCanonicalGroupThreadManager1);return j;};h.prototype.handleUpdate=function(j){if(j.mercury_payload)this.$MercuryCanonicalGroupThreadManager3.handleUpdate(j.mercury_payload);var k=j.canonical_group;if(k)for(var l in k)this.$MercuryCanonicalGroupThreadManager13(l,k[l]);};h.prototype.getNow=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(this.$MercuryCanonicalGroupThreadManager10(j));return this.$MercuryCanonicalGroupThreadManager2.getResource(k);};h.prototype.$MercuryCanonicalGroupThreadManager9=function(){c('Bootloader').loadModules(["MercuryThreadInformer"],function(j){var k=j.getForFBID(this.$MercuryCanonicalGroupThreadManager1),l=new (c('SubscriptionsHandler'))();l.addSubscriptions(k.subscribe('threads-deleted',function(m,n){for(var o in n)if(this.$MercuryCanonicalGroupThreadManager4[o]){this.$MercuryCanonicalGroupThreadManager2.setResource(this.$MercuryCanonicalGroupThreadManager4[o],undefined);delete this.$MercuryCanonicalGroupThreadManager4[o];}}.bind(this)));this.$MercuryCanonicalGroupThreadManager5=l;}.bind(this),'MercuryCanonicalGroupThreadManager');};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('applyEmoticonToContentBlock',['CharacterMetadata','DraftEntity','EmoticonsList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m){if(!c('EmoticonsList').emotes[l])return k;var n=c('DraftEntity').create('EMOTICON','IMMUTABLE',{type:c('EmoticonsList').emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c('CharacterMetadata').applyEntity(r,n)),p.slice(m+q))});}f.exports=j;}),null);
__d('insertEmoticonIntoContentState',['DraftModifier','applyEmoticonToContentBlock'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=c('DraftModifier').replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c('applyEmoticonToContentBlock')(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})});}f.exports=h;}),null);
__d('insertEmoticonIntoEditorState',['DraftModifier','EditorState','insertEmoticonIntoContentState'],(function a(b,c,d,e,f,g){'use strict';var h=' ';function i(j,k){var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r='';if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c('DraftModifier').insertText(m,l,h);l=m.getSelectionAfter();}var s=c('insertEmoticonIntoContentState')(j,m,l);m=c('DraftModifier').insertText(s,s.getSelectionAfter(),r);return c('EditorState').push(k,m,'insert-characters');}f.exports=i;}),null);
__d('isSoftNewlineEvent',['Keys'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.which===c('Keys').RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}f.exports=h;}),null);
__d('isWebGLEnabled',[],(function a(b,c,d,e,f,g){'use strict';var h=null;function i(){try{var k=document.createElement('canvas');return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext('webgl')||k.getContext('experimental-webgl'));}catch(l){return false;}}function j(){if(h===null)h=i();return h;}f.exports=j;}),null);